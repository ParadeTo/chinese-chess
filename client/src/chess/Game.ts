import Board, { UpdatePieceResult } from './Board'
import { Piece, B, J, M, P, S, X, Z } from './Piece'
import Player from './Player'
import Bridge from '@/ai/bridge'
import { IPlayer } from '../store/types'
import ProxyAi from '@/ai/proxy'

export default class Game {
  board: Board
  bPlayer: Player
  tPlayer: Player
  public currentPlayer: Player
  constructor(board: Board, bPlayer: Player, tPlayer: Player) {
    this.board = board
    this.bPlayer = bPlayer
    this.tPlayer = tPlayer
    this.currentPlayer = this.bPlayer.color === 'r' ? this.bPlayer : this.tPlayer
  }

  switchPlayer() {
    if (this.currentPlayer === this.tPlayer) this.currentPlayer = this.bPlayer
    else this.currentPlayer = this.tPlayer
  }

  updatePiece(piece: Piece, newPos: number[], _piece?: any): UpdatePieceResult {
    if (piece.color === this.currentPlayer.color) {
      return this.board.updatePiece(piece, newPos)
    }
    return { result: false }
  }

  async autoMove() {
    let nextMove
    if (this.currentPlayer.ai) {
      nextMove = await this.currentPlayer.ai.getNextMove(this.board, this.currentPlayer.color)
      if (nextMove) {
        const { from, to, piece } = nextMove as any
        return this.updatePiece(this.board.cells[from[0]][from[1]] as Piece, to, piece)
      }
    }
    throw new Error('Only ai can execute autoMove!')
  }
}

export const createBoard = () => {
  const pieces = [
    new J({ color: 'b', pos: [0, 0], key: 'bj1' }),
    new M({ color: 'b', pos: [1, 0], key: 'bm1' }),
    new X({ color: 'b', pos: [2, 0], key: 'bx1' }),
    new S({ color: 'b', pos: [3, 0], key: 'bs1' }),
    new B({ color: 'b', pos: [4, 0], key: 'bb' }),
    new S({ color: 'b', pos: [5, 0], key: 'bs2' }),
    new X({ color: 'b', pos: [6, 0], key: 'bx2' }),
    new M({ color: 'b', pos: [7, 0], key: 'bm2' }),
    new J({ color: 'b', pos: [8, 0], key: 'bj2' }),
    new P({ color: 'b', pos: [1, 2], key: 'bp1' }),
    new P({ color: 'b', pos: [7, 2], key: 'bp2' }),
    new Z({ color: 'b', pos: [0, 3], key: 'bz1' }),
    new Z({ color: 'b', pos: [2, 3], key: 'bz2' }),
    new Z({ color: 'b', pos: [4, 3], key: 'bz3' }),
    new Z({ color: 'b', pos: [6, 3], key: 'bz4' }),
    new Z({ color: 'b', pos: [8, 3], key: 'bz5' }),

    new J({ color: 'r', pos: [0, 9], key: 'rj1' }),
    new M({ color: 'r', pos: [1, 9], key: 'rm1' }),
    new X({ color: 'r', pos: [2, 9], key: 'rx1' }),
    new S({ color: 'r', pos: [3, 9], key: 'rs1' }),
    new B({ color: 'r', pos: [4, 9], key: 'rb' }),
    new S({ color: 'r', pos: [5, 9], key: 'rs2' }),
    new X({ color: 'r', pos: [6, 9], key: 'rx2' }),
    new M({ color: 'r', pos: [7, 9], key: 'rm2' }),
    new J({ color: 'r', pos: [8, 9], key: 'rj2' }),
    new P({ color: 'r', pos: [1, 7], key: 'rp1' }),
    new P({ color: 'r', pos: [7, 7], key: 'rp2' }),
    new Z({ color: 'r', pos: [0, 6], key: 'rz1' }),
    new Z({ color: 'r', pos: [2, 6], key: 'rz2' }),
    new Z({ color: 'r', pos: [4, 6], key: 'rz3' }),
    new Z({ color: 'r', pos: [6, 6], key: 'rz4' }),
    new Z({ color: 'r', pos: [8, 6], key: 'rz5' })
  ]
  const board = new Board(pieces)
  return board
}

const aiCode = `(function(t){var e={};function n(r){if(e[r])return e[r].exports;var o=e[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)n.d(r,o,function(e){return t[e]}.bind(null,o));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="/",n(n.s=1)})({"014b":function(t,e,n){"use strict";var r=n("e53d"),o=n("07e3"),i=n("8e60"),c=n("63b6"),a=n("9138"),u=n("ebfd").KEY,f=n("294c"),s=n("dbdb"),l=n("45f2"),p=n("62a0"),v=n("5168"),h=n("ccb9"),b=n("6718"),d=n("47ee"),y=n("9003"),O=n("e4ae"),g=n("f772"),m=n("241e"),w=n("36c3"),j=n("1bc3"),x=n("aebd"),P=n("a159"),_=n("0395"),S=n("bf0b"),E=n("9aa9"),k=n("d9f6"),T=n("c3a1"),M=S.f,L=k.f,N=_.f,A=r.Symbol,D=r.JSON,I=D&&D.stringify,R="prototype",F=v("_hidden"),G=v("toPrimitive"),C={}.propertyIsEnumerable,B=s("symbol-registry"),H=s("symbols"),V=s("op-symbols"),W=Object[R],U="function"==typeof A&&!!E.f,K=r.QObject,z=!K||!K[R]||!K[R].findChild,J=i&&f((function(){return 7!=P(L({},"a",{get:function(){return L(this,"a",{value:7}).a}})).a}))?function(t,e,n){var r=M(W,e);r&&delete W[e],L(t,e,n),r&&t!==W&&L(W,e,r)}:L,X=function(t){var e=H[t]=P(A[R]);return e._k=t,e},Y=U&&"symbol"==typeof A.iterator?function(t){return"symbol"==typeof t}:function(t){return t instanceof A},q=function(t,e,n){return t===W&&q(V,e,n),O(t),e=j(e,!0),O(n),o(H,e)?(n.enumerable?(o(t,F)&&t[F][e]&&(t[F][e]=!1),n=P(n,{enumerable:x(0,!1)})):(o(t,F)||L(t,F,x(1,{})),t[F][e]=!0),J(t,e,n)):L(t,e,n)},Q=function(t,e){O(t);var n,r=d(e=w(e)),o=0,i=r.length;while(i>o)q(t,n=r[o++],e[n]);return t},$=function(t,e){return void 0===e?P(t):Q(P(t),e)},Z=function(t){var e=C.call(this,t=j(t,!0));return!(this===W&&o(H,t)&&!o(V,t))&&(!(e||!o(this,t)||!o(H,t)||o(this,F)&&this[F][t])||e)},tt=function(t,e){if(t=w(t),e=j(e,!0),t!==W||!o(H,e)||o(V,e)){var n=M(t,e);return!n||!o(H,e)||o(t,F)&&t[F][e]||(n.enumerable=!0),n}},et=function(t){var e,n=N(w(t)),r=[],i=0;while(n.length>i)o(H,e=n[i++])||e==F||e==u||r.push(e);return r},nt=function(t){var e,n=t===W,r=N(n?V:w(t)),i=[],c=0;while(r.length>c)!o(H,e=r[c++])||n&&!o(W,e)||i.push(H[e]);return i};U||(A=function(){if(this instanceof A)throw TypeError("Symbol is not a constructor!");var t=p(arguments.length>0?arguments[0]:void 0),e=function(n){this===W&&e.call(V,n),o(this,F)&&o(this[F],t)&&(this[F][t]=!1),J(this,t,x(1,n))};return i&&z&&J(W,t,{configurable:!0,set:e}),X(t)},a(A[R],"toString",(function(){return this._k})),S.f=tt,k.f=q,n("6abf").f=_.f=et,n("355d").f=Z,E.f=nt,i&&!n("b8e3")&&a(W,"propertyIsEnumerable",Z,!0),h.f=function(t){return X(v(t))}),c(c.G+c.W+c.F*!U,{Symbol:A});for(var rt="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),ot=0;rt.length>ot;)v(rt[ot++]);for(var it=T(v.store),ct=0;it.length>ct;)b(it[ct++]);c(c.S+c.F*!U,"Symbol",{for:function(t){return o(B,t+="")?B[t]:B[t]=A(t)},keyFor:function(t){if(!Y(t))throw TypeError(t+" is not a symbol!");for(var e in B)if(B[e]===t)return e},useSetter:function(){z=!0},useSimple:function(){z=!1}}),c(c.S+c.F*!U,"Object",{create:$,defineProperty:q,defineProperties:Q,getOwnPropertyDescriptor:tt,getOwnPropertyNames:et,getOwnPropertySymbols:nt});var at=f((function(){E.f(1)}));c(c.S+c.F*at,"Object",{getOwnPropertySymbols:function(t){return E.f(m(t))}}),D&&c(c.S+c.F*(!U||f((function(){var t=A();return"[null]"!=I([t])||"{}"!=I({a:t})||"{}"!=I(Object(t))}))),"JSON",{stringify:function(t){var e,n,r=[t],o=1;while(arguments.length>o)r.push(arguments[o++]);if(n=e=r[1],(g(e)||void 0!==t)&&!Y(t))return y(e)||(e=function(t,e){if("function"==typeof n&&(e=n.call(this,t,e)),!Y(e))return e}),r[1]=e,I.apply(D,r)}}),A[R][G]||n("35e8")(A[R],G,A[R].valueOf),l(A,"Symbol"),l(Math,"Math",!0),l(r.JSON,"JSON",!0)},"01f9":function(t,e,n){"use strict";var r=n("2d00"),o=n("5ca1"),i=n("2aba"),c=n("32e9"),a=n("84f2"),u=n("41a0"),f=n("7f20"),s=n("38fd"),l=n("2b4c")("iterator"),p=!([].keys&&"next"in[].keys()),v="@@iterator",h="keys",b="values",d=function(){return this};t.exports=function(t,e,n,y,O,g,m){u(n,e,y);var w,j,x,P=function(t){if(!p&&t in k)return k[t];switch(t){case h:return function(){return new n(this,t)};case b:return function(){return new n(this,t)}}return function(){return new n(this,t)}},_=e+" Iterator",S=O==b,E=!1,k=t.prototype,T=k[l]||k[v]||O&&k[O],M=T||P(O),L=O?S?P("entries"):M:void 0,N="Array"==e&&k.entries||T;if(N&&(x=s(N.call(new t)),x!==Object.prototype&&x.next&&(f(x,_,!0),r||"function"==typeof x[l]||c(x,l,d))),S&&T&&T.name!==b&&(E=!0,M=function(){return T.call(this)}),r&&!m||!p&&!E&&k[l]||c(k,l,M),a[e]=M,a[_]=d,O)if(w={values:S?M:P(b),keys:g?M:P(h),entries:L},m)for(j in w)j in k||i(k,j,w[j]);else o(o.P+o.F*(p||E),e,w);return w}},"0293":function(t,e,n){var r=n("241e"),o=n("53e2");n("ce7e")("getPrototypeOf",(function(){return function(t){return o(r(t))}}))},"0395":function(t,e,n){var r=n("36c3"),o=n("6abf").f,i={}.toString,c="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],a=function(t){try{return o(t)}catch(e){return c.slice()}};t.exports.f=function(t){return c&&"[object Window]"==i.call(t)?a(t):o(r(t))}},"061b":function(t,e,n){t.exports=n("fa99")},"07e3":function(t,e){var n={}.hasOwnProperty;t.exports=function(t,e){return n.call(t,e)}},"097d":function(t,e,n){"use strict";var r=n("5ca1"),o=n("8378"),i=n("7726"),c=n("ebd6"),a=n("bcaa");r(r.P+r.R,"Promise",{finally:function(t){var e=c(this,o.Promise||i.Promise),n="function"==typeof t;return this.then(n?function(n){return a(e,t()).then((function(){return n}))}:t,n?function(n){return a(e,t()).then((function(){throw n}))}:t)}})},"0a49":function(t,e,n){var r=n("9b43"),o=n("626a"),i=n("4bf8"),c=n("9def"),a=n("cd1c");t.exports=function(t,e){var n=1==t,u=2==t,f=3==t,s=4==t,l=6==t,p=5==t||l,v=e||a;return function(e,a,h){for(var b,d,y=i(e),O=o(y),g=r(a,h,3),m=c(O.length),w=0,j=n?v(e,m):u?v(e,0):void 0;m>w;w++)if((p||w in O)&&(b=O[w],d=g(b,w,y),t))if(n)j[w]=d;else if(d)switch(t){case 3:return!0;case 5:return b;case 6:return w;case 2:j.push(b)}else if(s)return!1;return l?-1:f||s?s:j}}},"0bfb":function(t,e,n){"use strict";var r=n("cb7c");t.exports=function(){var t=r(this),e="";return t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),t.unicode&&(e+="u"),t.sticky&&(e+="y"),e}},"0d58":function(t,e,n){var r=n("ce10"),o=n("e11e");t.exports=Object.keys||function(t){return r(t,o)}},"0fc9":function(t,e,n){var r=n("3a38"),o=Math.max,i=Math.min;t.exports=function(t,e){return t=r(t),t<0?o(t+e,0):i(t,e)}},1:function(t,e,n){t.exports=n("97da")},1169:function(t,e,n){var r=n("2d95");t.exports=Array.isArray||function(t){return"Array"==r(t)}},1173:function(t,e){t.exports=function(t,e,n,r){if(!(t instanceof e)||void 0!==r&&r in t)throw TypeError(n+": incorrect invocation!");return t}},"11e9":function(t,e,n){var r=n("52a7"),o=n("4630"),i=n("6821"),c=n("6a99"),a=n("69a8"),u=n("c69a"),f=Object.getOwnPropertyDescriptor;e.f=n("9e1e")?f:function(t,e){if(t=i(t),e=c(e,!0),u)try{return f(t,e)}catch(n){}if(a(t,e))return o(!r.f.call(t,e),t[e])}},1495:function(t,e,n){var r=n("86cc"),o=n("cb7c"),i=n("0d58");t.exports=n("9e1e")?Object.defineProperties:function(t,e){o(t);var n,c=i(e),a=c.length,u=0;while(a>u)r.f(t,n=c[u++],e[n]);return t}},1654:function(t,e,n){"use strict";var r=n("71c1")(!0);n("30f1")(String,"String",(function(t){this._t=String(t),this._i=0}),(function(){var t,e=this._t,n=this._i;return n>=e.length?{value:void 0,done:!0}:(t=r(e,n),this._i+=t.length,{value:t,done:!1})}))},1691:function(t,e){t.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},1991:function(t,e,n){var r,o,i,c=n("9b43"),a=n("31f4"),u=n("fab2"),f=n("230e"),s=n("7726"),l=s.process,p=s.setImmediate,v=s.clearImmediate,h=s.MessageChannel,b=s.Dispatch,d=0,y={},O="onreadystatechange",g=function(){var t=+this;if(y.hasOwnProperty(t)){var e=y[t];delete y[t],e()}},m=function(t){g.call(t.data)};p&&v||(p=function(t){var e=[],n=1;while(arguments.length>n)e.push(arguments[n++]);return y[++d]=function(){a("function"==typeof t?t:Function(t),e)},r(d),d},v=function(t){delete y[t]},"process"==n("2d95")(l)?r=function(t){l.nextTick(c(g,t,1))}:b&&b.now?r=function(t){b.now(c(g,t,1))}:h?(o=new h,i=o.port2,o.port1.onmessage=m,r=c(i.postMessage,i,1)):s.addEventListener&&"function"==typeof postMessage&&!s.importScripts?(r=function(t){s.postMessage(t+"","*")},s.addEventListener("message",m,!1)):r=O in f("script")?function(t){u.appendChild(f("script"))[O]=function(){u.removeChild(this),g.call(t)}}:function(t){setTimeout(c(g,t,1),0)}),t.exports={set:p,clear:v}},"1af6":function(t,e,n){var r=n("63b6");r(r.S,"Array",{isArray:n("9003")})},"1bc3":function(t,e,n){var r=n("f772");t.exports=function(t,e){if(!r(t))return t;var n,o;if(e&&"function"==typeof(n=t.toString)&&!r(o=n.call(t)))return o;if("function"==typeof(n=t.valueOf)&&!r(o=n.call(t)))return o;if(!e&&"function"==typeof(n=t.toString)&&!r(o=n.call(t)))return o;throw TypeError("Can't convert object to primitive value")}},"1df8":function(t,e,n){var r=n("63b6");r(r.S,"Object",{setPrototypeOf:n("ead6").set})},"1ec9":function(t,e,n){var r=n("f772"),o=n("e53d").document,i=r(o)&&r(o.createElement);t.exports=function(t){return i?o.createElement(t):{}}},"1fa8":function(t,e,n){var r=n("cb7c");t.exports=function(t,e,n,o){try{return o?e(r(n)[0],n[1]):e(n)}catch(c){var i=t["return"];throw void 0!==i&&r(i.call(t)),c}}},"20d6":function(t,e,n){"use strict";var r=n("5ca1"),o=n("0a49")(6),i="findIndex",c=!0;i in[]&&Array(1)[i]((function(){c=!1})),r(r.P+r.F*c,"Array",{findIndex:function(t){return o(this,t,arguments.length>1?arguments[1]:void 0)}}),n("9c6c")(i)},"20fd":function(t,e,n){"use strict";var r=n("d9f6"),o=n("aebd");t.exports=function(t,e,n){e in t?r.f(t,e,o(0,n)):t[e]=n}},"214f":function(t,e,n){"use strict";n("b0c5");var r=n("2aba"),o=n("32e9"),i=n("79e5"),c=n("be13"),a=n("2b4c"),u=n("520a"),f=a("species"),s=!i((function(){var t=/./;return t.exec=function(){var t=[];return t.groups={a:"7"},t},"7"!=="".replace(t,"$<a>")})),l=function(){var t=/(?:)/,e=t.exec;t.exec=function(){return e.apply(this,arguments)};var n="ab".split(t);return 2===n.length&&"a"===n[0]&&"b"===n[1]}();t.exports=function(t,e,n){var p=a(t),v=!i((function(){var e={};return e[p]=function(){return 7},7!=""[t](e)})),h=v?!i((function(){var e=!1,n=/a/;return n.exec=function(){return e=!0,null},"split"===t&&(n.constructor={},n.constructor[f]=function(){return n}),n[p](""),!e})):void 0;if(!v||!h||"replace"===t&&!s||"split"===t&&!l){var b=/./[p],d=n(c,p,""[t],(function(t,e,n,r,o){return e.exec===u?v&&!o?{done:!0,value:b.call(e,n,r)}:{done:!0,value:t.call(n,e,r)}:{done:!1}})),y=d[0],O=d[1];r(String.prototype,t,y),o(RegExp.prototype,p,2==e?function(t,e){return O.call(t,this,e)}:function(t){return O.call(t,this)})}}},"230e":function(t,e,n){var r=n("d3f4"),o=n("7726").document,i=r(o)&&r(o.createElement);t.exports=function(t){return i?o.createElement(t):{}}},"23c6":function(t,e,n){var r=n("2d95"),o=n("2b4c")("toStringTag"),i="Arguments"==r(function(){return arguments}()),c=function(t,e){try{return t[e]}catch(n){}};t.exports=function(t){var e,n,a;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(n=c(e=Object(t),o))?n:i?r(e):"Object"==(a=r(e))&&"function"==typeof e.callee?"Arguments":a}},"241e":function(t,e,n){var r=n("25eb");t.exports=function(t){return Object(r(t))}},"24c5":function(t,e,n){"use strict";var r,o,i,c,a=n("b8e3"),u=n("e53d"),f=n("d864"),s=n("40c3"),l=n("63b6"),p=n("f772"),v=n("79aa"),h=n("1173"),b=n("a22a"),d=n("f201"),y=n("4178").set,O=n("aba2")(),g=n("656e"),m=n("4439"),w=n("bc13"),j=n("cd78"),x="Promise",P=u.TypeError,_=u.process,S=_&&_.versions,E=S&&S.v8||"",k=u[x],T="process"==s(_),M=function(){},L=o=g.f,N=!!function(){try{var t=k.resolve(1),e=(t.constructor={})[n("5168")("species")]=function(t){t(M,M)};return(T||"function"==typeof PromiseRejectionEvent)&&t.then(M)instanceof e&&0!==E.indexOf("6.6")&&-1===w.indexOf("Chrome/66")}catch(r){}}(),A=function(t){var e;return!(!p(t)||"function"!=typeof(e=t.then))&&e},D=function(t,e){if(!t._n){t._n=!0;var n=t._c;O((function(){var r=t._v,o=1==t._s,i=0,c=function(e){var n,i,c,a=o?e.ok:e.fail,u=e.resolve,f=e.reject,s=e.domain;try{a?(o||(2==t._h&&F(t),t._h=1),!0===a?n=r:(s&&s.enter(),n=a(r),s&&(s.exit(),c=!0)),n===e.promise?f(P("Promise-chain cycle")):(i=A(n))?i.call(n,u,f):u(n)):f(r)}catch(l){s&&!c&&s.exit(),f(l)}};while(n.length>i)c(n[i++]);t._c=[],t._n=!1,e&&!t._h&&I(t)}))}},I=function(t){y.call(u,(function(){var e,n,r,o=t._v,i=R(t);if(i&&(e=m((function(){T?_.emit("unhandledRejection",o,t):(n=u.onunhandledrejection)?n({promise:t,reason:o}):(r=u.console)&&r.error&&r.error("Unhandled promise rejection",o)})),t._h=T||R(t)?2:1),t._a=void 0,i&&e.e)throw e.v}))},R=function(t){return 1!==t._h&&0===(t._a||t._c).length},F=function(t){y.call(u,(function(){var e;T?_.emit("rejectionHandled",t):(e=u.onrejectionhandled)&&e({promise:t,reason:t._v})}))},G=function(t){var e=this;e._d||(e._d=!0,e=e._w||e,e._v=t,e._s=2,e._a||(e._a=e._c.slice()),D(e,!0))},C=function(t){var e,n=this;if(!n._d){n._d=!0,n=n._w||n;try{if(n===t)throw P("Promise can't be resolved itself");(e=A(t))?O((function(){var r={_w:n,_d:!1};try{e.call(t,f(C,r,1),f(G,r,1))}catch(o){G.call(r,o)}})):(n._v=t,n._s=1,D(n,!1))}catch(r){G.call({_w:n,_d:!1},r)}}};N||(k=function(t){h(this,k,x,"_h"),v(t),r.call(this);try{t(f(C,this,1),f(G,this,1))}catch(e){G.call(this,e)}},r=function(t){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1},r.prototype=n("5c95")(k.prototype,{then:function(t,e){var n=L(d(this,k));return n.ok="function"!=typeof t||t,n.fail="function"==typeof e&&e,n.domain=T?_.domain:void 0,this._c.push(n),this._a&&this._a.push(n),this._s&&D(this,!1),n.promise},catch:function(t){return this.then(void 0,t)}}),i=function(){var t=new r;this.promise=t,this.resolve=f(C,t,1),this.reject=f(G,t,1)},g.f=L=function(t){return t===k||t===c?new i(t):o(t)}),l(l.G+l.W+l.F*!N,{Promise:k}),n("45f2")(k,x),n("4c95")(x),c=n("584a")[x],l(l.S+l.F*!N,x,{reject:function(t){var e=L(this),n=e.reject;return n(t),e.promise}}),l(l.S+l.F*(a||!N),x,{resolve:function(t){return j(a&&this===c?k:this,t)}}),l(l.S+l.F*!(N&&n("4ee1")((function(t){k.all(t)["catch"](M)}))),x,{all:function(t){var e=this,n=L(e),r=n.resolve,o=n.reject,i=m((function(){var n=[],i=0,c=1;b(t,!1,(function(t){var a=i++,u=!1;n.push(void 0),c++,e.resolve(t).then((function(t){u||(u=!0,n[a]=t,--c||r(n))}),o)})),--c||r(n)}));return i.e&&o(i.v),n.promise},race:function(t){var e=this,n=L(e),r=n.reject,o=m((function(){b(t,!1,(function(t){e.resolve(t).then(n.resolve,r)}))}));return o.e&&r(o.v),n.promise}})},"25b0":function(t,e,n){n("1df8"),t.exports=n("584a").Object.setPrototypeOf},"25eb":function(t,e){t.exports=function(t){if(void 0==t)throw TypeError("Can't call method on  "+t);return t}},2621:function(t,e){e.f=Object.getOwnPropertySymbols},"27ee":function(t,e,n){var r=n("23c6"),o=n("2b4c")("iterator"),i=n("84f2");t.exports=n("8378").getIteratorMethod=function(t){if(void 0!=t)return t[o]||t["@@iterator"]||i[r(t)]}},"294c":function(t,e){t.exports=function(t){try{return!!t()}catch(e){return!0}}},"2aba":function(t,e,n){var r=n("7726"),o=n("32e9"),i=n("69a8"),c=n("ca5a")("src"),a=n("fa5b"),u="toString",f=(""+a).split(u);n("8378").inspectSource=function(t){return a.call(t)},(t.exports=function(t,e,n,a){var u="function"==typeof n;u&&(i(n,"name")||o(n,"name",e)),t[e]!==n&&(u&&(i(n,c)||o(n,c,t[e]?""+t[e]:f.join(String(e)))),t===r?t[e]=n:a?t[e]?t[e]=n:o(t,e,n):(delete t[e],o(t,e,n)))})(Function.prototype,u,(function(){return"function"==typeof this&&this[c]||a.call(this)}))},"2aeb":function(t,e,n){var r=n("cb7c"),o=n("1495"),i=n("e11e"),c=n("613b")("IE_PROTO"),a=function(){},u="prototype",f=function(){var t,e=n("230e")("iframe"),r=i.length,o="<",c=">";e.style.display="none",n("fab2").appendChild(e),e.src="javascript:",t=e.contentWindow.document,t.open(),t.write(o+"script"+c+"document.F=Object"+o+"/script"+c),t.close(),f=t.F;while(r--)delete f[u][i[r]];return f()};t.exports=Object.create||function(t,e){var n;return null!==t?(a[u]=r(t),n=new a,a[u]=null,n[c]=t):n=f(),void 0===e?n:o(n,e)}},"2b4c":function(t,e,n){var r=n("5537")("wks"),o=n("ca5a"),i=n("7726").Symbol,c="function"==typeof i,a=t.exports=function(t){return r[t]||(r[t]=c&&i[t]||(c?i:o)("Symbol."+t))};a.store=r},"2d00":function(t,e){t.exports=!1},"2d95":function(t,e){var n={}.toString;t.exports=function(t){return n.call(t).slice(8,-1)}},3024:function(t,e){t.exports=function(t,e,n){var r=void 0===n;switch(e.length){case 0:return r?t():t.call(n);case 1:return r?t(e[0]):t.call(n,e[0]);case 2:return r?t(e[0],e[1]):t.call(n,e[0],e[1]);case 3:return r?t(e[0],e[1],e[2]):t.call(n,e[0],e[1],e[2]);case 4:return r?t(e[0],e[1],e[2],e[3]):t.call(n,e[0],e[1],e[2],e[3])}return t.apply(n,e)}},"308d":function(t,e,n){"use strict";var r=n("7618");function o(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function i(t,e){return!e||"object"!==Object(r["a"])(e)&&"function"!==typeof e?o(t):e}n.d(e,"a",(function(){return i}))},"30f1":function(t,e,n){"use strict";var r=n("b8e3"),o=n("63b6"),i=n("9138"),c=n("35e8"),a=n("481b"),u=n("8f60"),f=n("45f2"),s=n("53e2"),l=n("5168")("iterator"),p=!([].keys&&"next"in[].keys()),v="@@iterator",h="keys",b="values",d=function(){return this};t.exports=function(t,e,n,y,O,g,m){u(n,e,y);var w,j,x,P=function(t){if(!p&&t in k)return k[t];switch(t){case h:return function(){return new n(this,t)};case b:return function(){return new n(this,t)}}return function(){return new n(this,t)}},_=e+" Iterator",S=O==b,E=!1,k=t.prototype,T=k[l]||k[v]||O&&k[O],M=T||P(O),L=O?S?P("entries"):M:void 0,N="Array"==e&&k.entries||T;if(N&&(x=s(N.call(new t)),x!==Object.prototype&&x.next&&(f(x,_,!0),r||"function"==typeof x[l]||c(x,l,d))),S&&T&&T.name!==b&&(E=!0,M=function(){return T.call(this)}),r&&!m||!p&&!E&&k[l]||c(k,l,M),a[e]=M,a[_]=d,O)if(w={values:S?M:P(b),keys:g?M:P(h),entries:L},m)for(j in w)j in k||i(k,j,w[j]);else o(o.P+o.F*(p||E),e,w);return w}},"31f4":function(t,e){t.exports=function(t,e,n){var r=void 0===n;switch(e.length){case 0:return r?t():t.call(n);case 1:return r?t(e[0]):t.call(n,e[0]);case 2:return r?t(e[0],e[1]):t.call(n,e[0],e[1]);case 3:return r?t(e[0],e[1],e[2]):t.call(n,e[0],e[1],e[2]);case 4:return r?t(e[0],e[1],e[2],e[3]):t.call(n,e[0],e[1],e[2],e[3])}return t.apply(n,e)}},"32e9":function(t,e,n){var r=n("86cc"),o=n("4630");t.exports=n("9e1e")?function(t,e,n){return r.f(t,e,o(1,n))}:function(t,e,n){return t[e]=n,t}},"32fc":function(t,e,n){var r=n("e53d").document;t.exports=r&&r.documentElement},"335c":function(t,e,n){var r=n("6b4c");t.exports=Object("z").propertyIsEnumerable(0)?Object:function(t){return"String"==r(t)?t.split(""):Object(t)}},"33a4":function(t,e,n){var r=n("84f2"),o=n("2b4c")("iterator"),i=Array.prototype;t.exports=function(t){return void 0!==t&&(r.Array===t||i[o]===t)}},"355d":function(t,e){e.f={}.propertyIsEnumerable},"35e8":function(t,e,n){var r=n("d9f6"),o=n("aebd");t.exports=n("8e60")?function(t,e,n){return r.f(t,e,o(1,n))}:function(t,e,n){return t[e]=n,t}},"36c3":function(t,e,n){var r=n("335c"),o=n("25eb");t.exports=function(t){return r(o(t))}},3702:function(t,e,n){var r=n("481b"),o=n("5168")("iterator"),i=Array.prototype;t.exports=function(t){return void 0!==t&&(r.Array===t||i[o]===t)}},"37c8":function(t,e,n){e.f=n("2b4c")},"386d":function(t,e,n){"use strict";var r=n("cb7c"),o=n("83a1"),i=n("5f1b");n("214f")("search",1,(function(t,e,n,c){return[function(n){var r=t(this),o=void 0==n?void 0:n[e];return void 0!==o?o.call(n,r):new RegExp(n)[e](String(r))},function(t){var e=c(n,t,this);if(e.done)return e.value;var a=r(t),u=String(this),f=a.lastIndex;o(f,0)||(a.lastIndex=0);var s=i(a,u);return o(a.lastIndex,f)||(a.lastIndex=f),null===s?-1:s.index}]}))},"38fd":function(t,e,n){var r=n("69a8"),o=n("4bf8"),i=n("613b")("IE_PROTO"),c=Object.prototype;t.exports=Object.getPrototypeOf||function(t){return t=o(t),r(t,i)?t[i]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?c:null}},"3a38":function(t,e){var n=Math.ceil,r=Math.floor;t.exports=function(t){return isNaN(t=+t)?0:(t>0?r:n)(t)}},"3a72":function(t,e,n){var r=n("7726"),o=n("8378"),i=n("2d00"),c=n("37c8"),a=n("86cc").f;t.exports=function(t){var e=o.Symbol||(o.Symbol=i?{}:r.Symbol||{});"_"==t.charAt(0)||t in e||a(e,t,{value:c.f(t)})}},"3b8d":function(t,e,n){"use strict";n.d(e,"a",(function(){return c}));var r=n("795b"),o=n.n(r);function i(t,e,n,r,i,c,a){try{var u=t[c](a),f=u.value}catch(s){return void n(s)}u.done?e(f):o.a.resolve(f).then(r,i)}function c(t){return function(){var e=this,n=arguments;return new o.a((function(r,o){var c=t.apply(e,n);function a(t){i(c,r,o,a,u,"next",t)}function u(t){i(c,r,o,a,u,"throw",t)}a(void 0)}))}}},"3c11":function(t,e,n){"use strict";var r=n("63b6"),o=n("584a"),i=n("e53d"),c=n("f201"),a=n("cd78");r(r.P+r.R,"Promise",{finally:function(t){var e=c(this,o.Promise||i.Promise),n="function"==typeof t;return this.then(n?function(n){return a(e,t()).then((function(){return n}))}:t,n?function(n){return a(e,t()).then((function(){throw n}))}:t)}})},"3fff":function(t,e,n){"use strict";e["a"]={INIT_AI:"INIT_AI",GET_NEXT_MOVE:"GET_NEXT_MOVE",RETURN_NEXT_MOVE:"RETURN_NEXT_MOVE",GET_BEST_MOVE:"GET_BEST_MOVE",RETURN_BEST_MOVE:"RETURN_BEST_MOVE"}},"40c3":function(t,e,n){var r=n("6b4c"),o=n("5168")("toStringTag"),i="Arguments"==r(function(){return arguments}()),c=function(t,e){try{return t[e]}catch(n){}};t.exports=function(t){var e,n,a;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(n=c(e=Object(t),o))?n:i?r(e):"Object"==(a=r(e))&&"function"==typeof e.callee?"Arguments":a}},4178:function(t,e,n){var r,o,i,c=n("d864"),a=n("3024"),u=n("32fc"),f=n("1ec9"),s=n("e53d"),l=s.process,p=s.setImmediate,v=s.clearImmediate,h=s.MessageChannel,b=s.Dispatch,d=0,y={},O="onreadystatechange",g=function(){var t=+this;if(y.hasOwnProperty(t)){var e=y[t];delete y[t],e()}},m=function(t){g.call(t.data)};p&&v||(p=function(t){var e=[],n=1;while(arguments.length>n)e.push(arguments[n++]);return y[++d]=function(){a("function"==typeof t?t:Function(t),e)},r(d),d},v=function(t){delete y[t]},"process"==n("6b4c")(l)?r=function(t){l.nextTick(c(g,t,1))}:b&&b.now?r=function(t){b.now(c(g,t,1))}:h?(o=new h,i=o.port2,o.port1.onmessage=m,r=c(i.postMessage,i,1)):s.addEventListener&&"function"==typeof postMessage&&!s.importScripts?(r=function(t){s.postMessage(t+"","*")},s.addEventListener("message",m,!1)):r=O in f("script")?function(t){u.appendChild(f("script"))[O]=function(){u.removeChild(this),g.call(t)}}:function(t){setTimeout(c(g,t,1),0)}),t.exports={set:p,clear:v}},"41a0":function(t,e,n){"use strict";var r=n("2aeb"),o=n("4630"),i=n("7f20"),c={};n("32e9")(c,n("2b4c")("iterator"),(function(){return this})),t.exports=function(t,e,n){t.prototype=r(c,{next:o(1,n)}),i(t,e+" Iterator")}},"43fc":function(t,e,n){"use strict";var r=n("63b6"),o=n("656e"),i=n("4439");r(r.S,"Promise",{try:function(t){var e=o.f(this),n=i(t);return(n.e?e.reject:e.resolve)(n.v),e.promise}})},4439:function(t,e){t.exports=function(t){try{return{e:!1,v:t()}}catch(e){return{e:!0,v:e}}}},"454f":function(t,e,n){n("46a7");var r=n("584a").Object;t.exports=function(t,e,n){return r.defineProperty(t,e,n)}},"456d":function(t,e,n){var r=n("4bf8"),o=n("0d58");n("5eda")("keys",(function(){return function(t){return o(r(t))}}))},4588:function(t,e){var n=Math.ceil,r=Math.floor;t.exports=function(t){return isNaN(t=+t)?0:(t>0?r:n)(t)}},"45f2":function(t,e,n){var r=n("d9f6").f,o=n("07e3"),i=n("5168")("toStringTag");t.exports=function(t,e,n){t&&!o(t=n?t:t.prototype,i)&&r(t,i,{configurable:!0,value:e})}},4630:function(t,e){t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},"469f":function(t,e,n){n("6c1c"),n("1654"),t.exports=n("7d7b")},"46a7":function(t,e,n){var r=n("63b6");r(r.S+r.F*!n("8e60"),"Object",{defineProperty:n("d9f6").f})},"47ee":function(t,e,n){var r=n("c3a1"),o=n("9aa9"),i=n("355d");t.exports=function(t){var e=r(t),n=o.f;if(n){var c,a=n(t),u=i.f,f=0;while(a.length>f)u.call(t,c=a[f++])&&e.push(c)}return e}},"481b":function(t,e){t.exports={}},"4a59":function(t,e,n){var r=n("9b43"),o=n("1fa8"),i=n("33a4"),c=n("cb7c"),a=n("9def"),u=n("27ee"),f={},s={};e=t.exports=function(t,e,n,l,p){var v,h,b,d,y=p?function(){return t}:u(t),O=r(n,l,e?2:1),g=0;if("function"!=typeof y)throw TypeError(t+" is not iterable!");if(i(y)){for(v=a(t.length);v>g;g++)if(d=e?O(c(h=t[g])[0],h[1]):O(t[g]),d===f||d===s)return d}else for(b=y.call(t);!(h=b.next()).done;)if(d=o(b,O,h.value,e),d===f||d===s)return d};e.BREAK=f,e.RETURN=s},"4aa6":function(t,e,n){t.exports=n("dc62")},"4bf8":function(t,e,n){var r=n("be13");t.exports=function(t){return Object(r(t))}},"4c95":function(t,e,n){"use strict";var r=n("e53d"),o=n("584a"),i=n("d9f6"),c=n("8e60"),a=n("5168")("species");t.exports=function(t){var e="function"==typeof o[t]?o[t]:r[t];c&&e&&!e[a]&&i.f(e,a,{configurable:!0,get:function(){return this}})}},"4d16":function(t,e,n){t.exports=n("25b0")},"4e2b":function(t,e,n){"use strict";var r=n("4aa6"),o=n.n(r),i=n("4d16"),c=n.n(i);function a(t,e){return a=c.a||function(t,e){return t.__proto__=e,t},a(t,e)}function u(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=o()(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&a(t,e)}n.d(e,"a",(function(){return u}))},"4ee1":function(t,e,n){var r=n("5168")("iterator"),o=!1;try{var i=[7][r]();i["return"]=function(){o=!0},Array.from(i,(function(){throw 2}))}catch(c){}t.exports=function(t,e){if(!e&&!o)return!1;var n=!1;try{var i=[7],a=i[r]();a.next=function(){return{done:n=!0}},i[r]=function(){return a},t(i)}catch(c){}return n}},"50ed":function(t,e){t.exports=function(t,e){return{value:e,done:!!t}}},5168:function(t,e,n){var r=n("dbdb")("wks"),o=n("62a0"),i=n("e53d").Symbol,c="function"==typeof i,a=t.exports=function(t){return r[t]||(r[t]=c&&i[t]||(c?i:o)("Symbol."+t))};a.store=r},"520a":function(t,e,n){"use strict";var r=n("0bfb"),o=RegExp.prototype.exec,i=String.prototype.replace,c=o,a="lastIndex",u=function(){var t=/a/,e=/b*/g;return o.call(t,"a"),o.call(e,"a"),0!==t[a]||0!==e[a]}(),f=void 0!==/()??/.exec("")[1],s=u||f;s&&(c=function(t){var e,n,c,s,l=this;return f&&(n=new RegExp("^"+l.source+"$(?!\\s)",r.call(l))),u&&(e=l[a]),c=o.call(l,t),u&&c&&(l[a]=l.global?c.index+c[0].length:e),f&&c&&c.length>1&&i.call(c[0],n,(function(){for(s=1;s<arguments.length-2;s++)void 0===arguments[s]&&(c[s]=void 0)})),c}),t.exports=c},"52a7":function(t,e){e.f={}.propertyIsEnumerable},"53e2":function(t,e,n){var r=n("07e3"),o=n("241e"),i=n("5559")("IE_PROTO"),c=Object.prototype;t.exports=Object.getPrototypeOf||function(t){return t=o(t),r(t,i)?t[i]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?c:null}},"549b":function(t,e,n){"use strict";var r=n("d864"),o=n("63b6"),i=n("241e"),c=n("b0dc"),a=n("3702"),u=n("b447"),f=n("20fd"),s=n("7cd6");o(o.S+o.F*!n("4ee1")((function(t){Array.from(t)})),"Array",{from:function(t){var e,n,o,l,p=i(t),v="function"==typeof this?this:Array,h=arguments.length,b=h>1?arguments[1]:void 0,d=void 0!==b,y=0,O=s(p);if(d&&(b=r(b,h>2?arguments[2]:void 0,2)),void 0==O||v==Array&&a(O))for(e=u(p.length),n=new v(e);e>y;y++)f(n,y,d?b(p[y],y):p[y]);else for(l=O.call(p),n=new v;!(o=l.next()).done;y++)f(n,y,d?c(l,b,[o.value,y],!0):o.value);return n.length=y,n}})},"54a1":function(t,e,n){n("6c1c"),n("1654"),t.exports=n("95d5")},"551c":function(t,e,n){"use strict";var r,o,i,c,a=n("2d00"),u=n("7726"),f=n("9b43"),s=n("23c6"),l=n("5ca1"),p=n("d3f4"),v=n("d8e8"),h=n("f605"),b=n("4a59"),d=n("ebd6"),y=n("1991").set,O=n("8079")(),g=n("a5b8"),m=n("9c80"),w=n("a25f"),j=n("bcaa"),x="Promise",P=u.TypeError,_=u.process,S=_&&_.versions,E=S&&S.v8||"",k=u[x],T="process"==s(_),M=function(){},L=o=g.f,N=!!function(){try{var t=k.resolve(1),e=(t.constructor={})[n("2b4c")("species")]=function(t){t(M,M)};return(T||"function"==typeof PromiseRejectionEvent)&&t.then(M)instanceof e&&0!==E.indexOf("6.6")&&-1===w.indexOf("Chrome/66")}catch(r){}}(),A=function(t){var e;return!(!p(t)||"function"!=typeof(e=t.then))&&e},D=function(t,e){if(!t._n){t._n=!0;var n=t._c;O((function(){var r=t._v,o=1==t._s,i=0,c=function(e){var n,i,c,a=o?e.ok:e.fail,u=e.resolve,f=e.reject,s=e.domain;try{a?(o||(2==t._h&&F(t),t._h=1),!0===a?n=r:(s&&s.enter(),n=a(r),s&&(s.exit(),c=!0)),n===e.promise?f(P("Promise-chain cycle")):(i=A(n))?i.call(n,u,f):u(n)):f(r)}catch(l){s&&!c&&s.exit(),f(l)}};while(n.length>i)c(n[i++]);t._c=[],t._n=!1,e&&!t._h&&I(t)}))}},I=function(t){y.call(u,(function(){var e,n,r,o=t._v,i=R(t);if(i&&(e=m((function(){T?_.emit("unhandledRejection",o,t):(n=u.onunhandledrejection)?n({promise:t,reason:o}):(r=u.console)&&r.error&&r.error("Unhandled promise rejection",o)})),t._h=T||R(t)?2:1),t._a=void 0,i&&e.e)throw e.v}))},R=function(t){return 1!==t._h&&0===(t._a||t._c).length},F=function(t){y.call(u,(function(){var e;T?_.emit("rejectionHandled",t):(e=u.onrejectionhandled)&&e({promise:t,reason:t._v})}))},G=function(t){var e=this;e._d||(e._d=!0,e=e._w||e,e._v=t,e._s=2,e._a||(e._a=e._c.slice()),D(e,!0))},C=function(t){var e,n=this;if(!n._d){n._d=!0,n=n._w||n;try{if(n===t)throw P("Promise can't be resolved itself");(e=A(t))?O((function(){var r={_w:n,_d:!1};try{e.call(t,f(C,r,1),f(G,r,1))}catch(o){G.call(r,o)}})):(n._v=t,n._s=1,D(n,!1))}catch(r){G.call({_w:n,_d:!1},r)}}};N||(k=function(t){h(this,k,x,"_h"),v(t),r.call(this);try{t(f(C,this,1),f(G,this,1))}catch(e){G.call(this,e)}},r=function(t){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1},r.prototype=n("dcbc")(k.prototype,{then:function(t,e){var n=L(d(this,k));return n.ok="function"!=typeof t||t,n.fail="function"==typeof e&&e,n.domain=T?_.domain:void 0,this._c.push(n),this._a&&this._a.push(n),this._s&&D(this,!1),n.promise},catch:function(t){return this.then(void 0,t)}}),i=function(){var t=new r;this.promise=t,this.resolve=f(C,t,1),this.reject=f(G,t,1)},g.f=L=function(t){return t===k||t===c?new i(t):o(t)}),l(l.G+l.W+l.F*!N,{Promise:k}),n("7f20")(k,x),n("7a56")(x),c=n("8378")[x],l(l.S+l.F*!N,x,{reject:function(t){var e=L(this),n=e.reject;return n(t),e.promise}}),l(l.S+l.F*(a||!N),x,{resolve:function(t){return j(a&&this===c?k:this,t)}}),l(l.S+l.F*!(N&&n("5cc5")((function(t){k.all(t)["catch"](M)}))),x,{all:function(t){var e=this,n=L(e),r=n.resolve,o=n.reject,i=m((function(){var n=[],i=0,c=1;b(t,!1,(function(t){var a=i++,u=!1;n.push(void 0),c++,e.resolve(t).then((function(t){u||(u=!0,n[a]=t,--c||r(n))}),o)})),--c||r(n)}));return i.e&&o(i.v),n.promise},race:function(t){var e=this,n=L(e),r=n.reject,o=m((function(){b(t,!1,(function(t){e.resolve(t).then(n.resolve,r)}))}));return o.e&&r(o.v),n.promise}})},5537:function(t,e,n){var r=n("8378"),o=n("7726"),i="__core-js_shared__",c=o[i]||(o[i]={});(t.exports=function(t,e){return c[t]||(c[t]=void 0!==e?e:{})})("versions",[]).push({version:r.version,mode:n("2d00")?"pure":"global",copyright:"© 2019 Denis Pushkarev (zloirock.ru)"})},5559:function(t,e,n){var r=n("dbdb")("keys"),o=n("62a0");t.exports=function(t){return r[t]||(r[t]=o(t))}},"559e":function(t,e,n){"use strict";var r=n("d225"),o=n("b0b4"),i=function(){function t(e){var n=e.role,o=e.color,i=e.pos,c=e.side,a=e.key;Object(r["a"])(this,t),this.key=a||o+n,this.color=o,this.role=n,this.pos=i,this.selected=!1,this.side=c||("r"===o?"b":"t")}return Object(o["a"])(t,[{key:"canPlaceAtDest",value:function(t,e){var n=e.getPieceByPos(t);return!(n&&n.color===this.color)}}]),t}(),c=(n("8e6e"),n("ac6a"),n("456d"),n("768b")),a=n("bd86"),u=n("308d"),f=n("6bb5"),s=n("4e2b"),l=n("7d84");function p(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function v(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?p(n,!0).forEach((function(e){Object(a["a"])(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):p(n).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var h=function(t){function e(t){return Object(r["a"])(this,e),Object(u["a"])(this,Object(f["a"])(e).call(this,v({role:"b"},t)))}return Object(s["a"])(e,t),Object(o["a"])(e,[{key:"getNextPositions",value:function(t){var n,r=this,o=Object(c["a"])(this.pos,2),i=o[0],a=o[1],u=[[-1,0],[1,0],[0,1],[0,-1]].map((function(t){var e=Object(c["a"])(t,2),n=e[0],r=e[1];return[i+n,a+r]})).filter((function(e){return r.canMove(e,t)}));if(a<3){for(var f=7;f<=9;f++){var s=t.cells[i][f];s&&"b"===s.role&&(n=s)}n&&!e.hasPieceBetweenBosses(t,this,n)&&u.push([i,n.pos[1]])}else{for(var l=0;l<=2;l++){var p=t.cells[i][l];p&&"b"===p.role&&(n=p)}n&&!e.hasPieceBetweenBosses(t,this,n)&&u.push([i,n.pos[1]])}return u}},{key:"canMove",value:function(t,n){var r=Object(c["a"])(this.pos,2),o=r[0],i=r[1],a=Object(c["a"])(t,2),u=a[0],f=a[1],s=n.cells[u][f];return!(!s||"b"!==s.role||s.color===this.color||s.pos[0]!==this.pos[0]||e.hasPieceBetweenBosses(n,this,s))||!(!l["a"].inNinePlace(t,this.side)||!(o===u&&1===Math.abs(i-f)||i===f&&1===Math.abs(o-u)))&&this.canPlaceAtDest(t,n)}}],[{key:"hasPieceBetweenBosses",value:function(t,e,n){var r=e.pos[1]+1,o=n.pos[1]-1;r>=o&&(r=n.pos[1]+1,o=e.pos[1]-1);for(var i=!1,c=r;c<=o;c++)t.cells[e.pos[0]][c]&&(i=!0);return i}}]),e}(i);function b(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function d(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?b(n,!0).forEach((function(e){Object(a["a"])(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):b(n).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var y=function(t){function e(t){return Object(r["a"])(this,e),Object(u["a"])(this,Object(f["a"])(e).call(this,d({role:"j"},t)))}return Object(s["a"])(e,t),Object(o["a"])(e,[{key:"canMove",value:function(t,e){var n=Object(c["a"])(this.pos,2),r=n[0],o=n[1],i=Object(c["a"])(t,2),a=i[0],u=i[1],f=e.cells;if(a===r&&u===o||a!==r&&u!==o)return!1;if(a===r){var s=o+1,l=u;u<o&&(s=u+1,l=o);for(var p=s;p<l;p++)if(f[r][p])return!1}if(u===o){var v=r+1,h=a;a<r&&(v=a+1,h=r);for(var b=v;b<h;b++)if(f[b][o])return!1}return this.canPlaceAtDest(t,e)}},{key:"getNextPositions",value:function(t){var e=Object(c["a"])(this.pos,2),n=e[0],r=e[1],o=t.cells,i=[],a=n-1;while(a>=0){var u=[a,r],f=o[a][r];if(f){f.color!==this.color&&i.push(u);break}i.push(u),a--}a=n+1;while(a<l["a"].WIDTH){var s=[a,r],p=o[a][r];if(p){p.color!==this.color&&i.push(s);break}i.push(s),a++}a=r-1;while(a>=0){var v=[n,a],h=o[n][a];if(h){h.color!==this.color&&i.push(v);break}i.push(v),a--}a=r+1;while(a<l["a"].HEIGHT){var b=[n,a],d=o[n][a];if(d){d.color!==this.color&&i.push(b);break}i.push(b),a++}return i}}]),e}(i);function O(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function g(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?O(n,!0).forEach((function(e){Object(a["a"])(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):O(n).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var m=function(t){function e(t){return Object(r["a"])(this,e),Object(u["a"])(this,Object(f["a"])(e).call(this,g({role:"m"},t)))}return Object(s["a"])(e,t),Object(o["a"])(e,[{key:"canMove",value:function(t,e){var n=Object(c["a"])(this.pos,2),r=n[0],o=n[1],i=Object(c["a"])(t,2),a=i[0],u=i[1],f=e.cells;return(u-o===2&&1===Math.abs(a-r)&&!f[r][o+1]||u-o===-2&&1===Math.abs(a-r)&&!f[r][o-1]||a-r===2&&1===Math.abs(u-o)&&!f[r+1][o]||a-r===-2&&1===Math.abs(u-o)&&!f[r-1][o])&&this.canPlaceAtDest(t,e)}},{key:"getNextPositions",value:function(t){var e=this,n=Object(c["a"])(this.pos,2),r=n[0],o=n[1];return[[-2,-1],[2,-1],[-2,1],[2,1],[-1,-2],[-1,2],[1,-2],[1,2]].map((function(t){var e=Object(c["a"])(t,2),n=e[0],i=e[1];return[r+n,o+i]})).filter((function(n){return t.canMove(e,n)}))}}]),e}(i);function w(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function j(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?w(n,!0).forEach((function(e){Object(a["a"])(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):w(n).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var x=function(t){function e(t){return Object(r["a"])(this,e),Object(u["a"])(this,Object(f["a"])(e).call(this,j({role:"p"},t)))}return Object(s["a"])(e,t),Object(o["a"])(e,[{key:"canMove",value:function(t,e){var n=Object(c["a"])(this.pos,2),r=n[0],o=n[1],i=Object(c["a"])(t,2),a=i[0],u=i[1],f=e.cells,s=e.getPieceByPos(t);if(a===r&&u===o||a!==r&&u!==o)return!1;if(a===r){var l=o+1,p=u-1;u<o&&(l=u+1,p=o-1);for(var v=0,h=l;h<=p;h++)if(f[r][h]&&v++,v>1)return!1;return 1===v?!!s&&s.color!==this.color:!s}if(u===o){var b=r+1,d=a-1;a<r&&(b=a+1,d=r-1);for(var y=0,O=b;O<=d;O++)if(f[O][o]&&y++,y>1)return!1;return 1===y?!!s&&s.color!==this.color:!s}return!1}},{key:"getNextPositions",value:function(t){var e=Object(c["a"])(this.pos,2),n=e[0],r=e[1],o=t.cells,i=[],a=n-1;while(a>=0){var u=o[a][r];if(u){var f=a-1;while(f>=0){var s=o[f][r];if(s){s.color!==this.color&&i.push([f,r]);break}f--}break}i.push([a,r]),a--}a=n+1;while(a<l["a"].WIDTH){var p=o[a][r];if(p){var v=a+1;while(v<l["a"].WIDTH){var h=o[v][r];if(h){h.color!==this.color&&i.push([v,r]);break}v++}break}i.push([a,r]),a++}a=r-1;while(a>=0){var b=o[n][a];if(b){var d=a-1;while(d>=0){var y=o[n][d];if(y){y.color!==this.color&&i.push([n,d]);break}d--}break}i.push([n,a]),a--}a=r+1;while(a<l["a"].HEIGHT){var O=o[n][a];if(O){var g=a+1;while(g<l["a"].HEIGHT){var m=o[n][g];if(m){m.color!==this.color&&i.push([n,g]);break}g++}break}i.push([n,a]),a++}return i}}]),e}(i);function P(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function _(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?P(n,!0).forEach((function(e){Object(a["a"])(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):P(n).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var S=function(t){function e(t){var n;return Object(r["a"])(this,e),n=Object(u["a"])(this,Object(f["a"])(e).call(this,_({role:"s"},t))),n.possiblePos={t:[[3,0],[5,0],[4,1],[3,2],[5,2]],b:[[3,9],[5,9],[4,8],[3,7],[5,7]]},n}return Object(s["a"])(e,t),Object(o["a"])(e,[{key:"canMove",value:function(t,e){var n=Object(c["a"])(this.pos,2),r=n[0],o=n[1],i=Object(c["a"])(t,2),a=i[0],u=i[1];return!(!this.possiblePos[this.side].some((function(t){return t[0]===a&&t[1]===u}))||1!==Math.abs(r-a)||1!==Math.abs(o-u))&&this.canPlaceAtDest(t,e)}},{key:"getNextPositions",value:function(t){var e=this,n=Object(c["a"])(this.pos,2),r=n[0],o=n[1];return[[-1,-1],[1,1],[-1,1],[1,-1]].map((function(t){var e=Object(c["a"])(t,2),n=e[0],i=e[1];return[r+n,o+i]})).filter((function(n){return e.canMove(n,t)}))}}]),e}(i);function E(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function k(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?E(n,!0).forEach((function(e){Object(a["a"])(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):E(n).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var T=function(t){function e(t){return Object(r["a"])(this,e),Object(u["a"])(this,Object(f["a"])(e).call(this,k({role:"x"},t)))}return Object(s["a"])(e,t),Object(o["a"])(e,[{key:"canMove",value:function(t,e){var n=Object(c["a"])(this.pos,2),r=n[0],o=n[1],i=Object(c["a"])(t,2),a=i[0],u=i[1],f=e.cells;return!(!l["a"].inOwnSide([a,u],this.side)||!(u-o===2&&a-r===2&&!f[r+1][o+1]||u-o===2&&a-r===-2&&!f[r-1][o+1]||u-o===-2&&a-r===2&&!f[r+1][o-1]||u-o===-2&&a-r===-2&&!f[r-1][o-1]))&&this.canPlaceAtDest(t,e)}},{key:"getNextPositions",value:function(t){var e=this,n=Object(c["a"])(this.pos,2),r=n[0],o=n[1];return[[-2,-2],[2,2],[-2,2],[2,-2]].map((function(t){var e=Object(c["a"])(t,2),n=e[0],i=e[1];return[r+n,o+i]})).filter((function(n){return t.canMove(e,n)}))}}]),e}(i);function M(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function L(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?M(n,!0).forEach((function(e){Object(a["a"])(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):M(n).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var N=function(t){function e(t){return Object(r["a"])(this,e),Object(u["a"])(this,Object(f["a"])(e).call(this,L({role:"z"},t)))}return Object(s["a"])(e,t),Object(o["a"])(e,[{key:"isCrossedRiver",value:function(){return"b"===this.side&&this.pos[1]<=4||"t"===this.side&&this.pos[1]>=5}},{key:"canMove",value:function(t,e){var n=Object(c["a"])(this.pos,2),r=n[0],o=n[1],i=Object(c["a"])(t,2),a=i[0],u=i[1];return!!("b"===this.side&&u===o-1||"t"===this.side&&u===o+1||this.isCrossedRiver()&&1===Math.abs(a-r))&&this.canPlaceAtDest(t,e)}},{key:"getNextPositions",value:function(t){var e=this,n=Object(c["a"])(this.pos,2),r=n[0],o=n[1],i=[];return"b"===this.side?o>4?i.push([0,-1]):(o-1>=0&&i.push([0,-1]),r-1>=0&&i.push([-1,0]),r+1<l["a"].WIDTH&&i.push([1,0])):o<5?i.push([0,1]):(o+1<l["a"].HEIGHT&&i.push([0,1]),r-1>=0&&i.push([-1,0]),r+1<l["a"].WIDTH&&i.push([1,0])),i.map((function(t){var e=Object(c["a"])(t,2),n=e[0],i=e[1];return[r+n,o+i]})).filter((function(n){return e.canMove(n,t)}))}}]),e}(i);n.d(e,"a",(function(){return h})),n.d(e,"b",(function(){return y})),n.d(e,"c",(function(){return m})),n.d(e,"d",(function(){return x})),n.d(e,"e",(function(){return S})),n.d(e,"f",(function(){return T})),n.d(e,"g",(function(){return N}))},"584a":function(t,e){var n=t.exports={version:"2.6.10"};"number"==typeof __e&&(__e=n)},"5b4e":function(t,e,n){var r=n("36c3"),o=n("b447"),i=n("0fc9");t.exports=function(t){return function(e,n,c){var a,u=r(e),f=o(u.length),s=i(c,f);if(t&&n!=n){while(f>s)if(a=u[s++],a!=a)return!0}else for(;f>s;s++)if((t||s in u)&&u[s]===n)return t||s||0;return!t&&-1}}},"5c95":function(t,e,n){var r=n("35e8");t.exports=function(t,e,n){for(var o in e)n&&t[o]?t[o]=e[o]:r(t,o,e[o]);return t}},"5ca1":function(t,e,n){var r=n("7726"),o=n("8378"),i=n("32e9"),c=n("2aba"),a=n("9b43"),u="prototype",f=function(t,e,n){var s,l,p,v,h=t&f.F,b=t&f.G,d=t&f.S,y=t&f.P,O=t&f.B,g=b?r:d?r[e]||(r[e]={}):(r[e]||{})[u],m=b?o:o[e]||(o[e]={}),w=m[u]||(m[u]={});for(s in b&&(n=e),n)l=!h&&g&&void 0!==g[s],p=(l?g:n)[s],v=O&&l?a(p,r):y&&"function"==typeof p?a(Function.call,p):p,g&&c(g,s,p,t&f.U),m[s]!=p&&i(m,s,v),y&&w[s]!=p&&(w[s]=p)};r.core=o,f.F=1,f.G=2,f.S=4,f.P=8,f.B=16,f.W=32,f.U=64,f.R=128,t.exports=f},"5cc5":function(t,e,n){var r=n("2b4c")("iterator"),o=!1;try{var i=[7][r]();i["return"]=function(){o=!0},Array.from(i,(function(){throw 2}))}catch(c){}t.exports=function(t,e){if(!e&&!o)return!1;var n=!1;try{var i=[7],a=i[r]();a.next=function(){return{done:n=!0}},i[r]=function(){return a},t(i)}catch(c){}return n}},"5d58":function(t,e,n){t.exports=n("d8d6")},"5d73":function(t,e,n){t.exports=n("469f")},"5eda":function(t,e,n){var r=n("5ca1"),o=n("8378"),i=n("79e5");t.exports=function(t,e){var n=(o.Object||{})[t]||Object[t],c={};c[t]=e(n),r(r.S+r.F*i((function(){n(1)})),"Object",c)}},"5f1b":function(t,e,n){"use strict";var r=n("23c6"),o=RegExp.prototype.exec;t.exports=function(t,e){var n=t.exec;if("function"===typeof n){var i=n.call(t,e);if("object"!==typeof i)throw new TypeError("RegExp exec method returned something other than an Object or null");return i}if("RegExp"!==r(t))throw new TypeError("RegExp#exec called on incompatible receiver");return o.call(t,e)}},"613b":function(t,e,n){var r=n("5537")("keys"),o=n("ca5a");t.exports=function(t){return r[t]||(r[t]=o(t))}},"626a":function(t,e,n){var r=n("2d95");t.exports=Object("z").propertyIsEnumerable(0)?Object:function(t){return"String"==r(t)?t.split(""):Object(t)}},"62a0":function(t,e){var n=0,r=Math.random();t.exports=function(t){return"Symbol(".concat(void 0===t?"":t,")_",(++n+r).toString(36))}},"63b6":function(t,e,n){var r=n("e53d"),o=n("584a"),i=n("d864"),c=n("35e8"),a=n("07e3"),u="prototype",f=function(t,e,n){var s,l,p,v=t&f.F,h=t&f.G,b=t&f.S,d=t&f.P,y=t&f.B,O=t&f.W,g=h?o:o[e]||(o[e]={}),m=g[u],w=h?r:b?r[e]:(r[e]||{})[u];for(s in h&&(n=e),n)l=!v&&w&&void 0!==w[s],l&&a(g,s)||(p=l?w[s]:n[s],g[s]=h&&"function"!=typeof w[s]?n[s]:y&&l?i(p,r):O&&w[s]==p?function(t){var e=function(e,n,r){if(this instanceof t){switch(arguments.length){case 0:return new t;case 1:return new t(e);case 2:return new t(e,n)}return new t(e,n,r)}return t.apply(this,arguments)};return e[u]=t[u],e}(p):d&&"function"==typeof p?i(Function.call,p):p,d&&((g.virtual||(g.virtual={}))[s]=p,t&f.R&&m&&!m[s]&&c(m,s,p)))};f.F=1,f.G=2,f.S=4,f.P=8,f.B=16,f.W=32,f.U=64,f.R=128,t.exports=f},"656e":function(t,e,n){"use strict";var r=n("79aa");function o(t){var e,n;this.promise=new t((function(t,r){if(void 0!==e||void 0!==n)throw TypeError("Bad Promise constructor");e=t,n=r})),this.resolve=r(e),this.reject=r(n)}t.exports.f=function(t){return new o(t)}},6718:function(t,e,n){var r=n("e53d"),o=n("584a"),i=n("b8e3"),c=n("ccb9"),a=n("d9f6").f;t.exports=function(t){var e=o.Symbol||(o.Symbol=i?{}:r.Symbol||{});"_"==t.charAt(0)||t in e||a(e,t,{value:c.f(t)})}},"67ab":function(t,e,n){var r=n("ca5a")("meta"),o=n("d3f4"),i=n("69a8"),c=n("86cc").f,a=0,u=Object.isExtensible||function(){return!0},f=!n("79e5")((function(){return u(Object.preventExtensions({}))})),s=function(t){c(t,r,{value:{i:"O"+ ++a,w:{}}})},l=function(t,e){if(!o(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!i(t,r)){if(!u(t))return"F";if(!e)return"E";s(t)}return t[r].i},p=function(t,e){if(!i(t,r)){if(!u(t))return!0;if(!e)return!1;s(t)}return t[r].w},v=function(t){return f&&h.NEED&&u(t)&&!i(t,r)&&s(t),t},h=t.exports={KEY:r,NEED:!1,fastKey:l,getWeak:p,onFreeze:v}},"67bb":function(t,e,n){t.exports=n("f921")},6821:function(t,e,n){var r=n("626a"),o=n("be13");t.exports=function(t){return r(o(t))}},"696e":function(t,e,n){n("c207"),n("1654"),n("6c1c"),n("24c5"),n("3c11"),n("43fc"),t.exports=n("584a").Promise},"69a8":function(t,e){var n={}.hasOwnProperty;t.exports=function(t,e){return n.call(t,e)}},"69d3":function(t,e,n){n("6718")("asyncIterator")},"6a99":function(t,e,n){var r=n("d3f4");t.exports=function(t,e){if(!r(t))return t;var n,o;if(e&&"function"==typeof(n=t.toString)&&!r(o=n.call(t)))return o;if("function"==typeof(n=t.valueOf)&&!r(o=n.call(t)))return o;if(!e&&"function"==typeof(n=t.toString)&&!r(o=n.call(t)))return o;throw TypeError("Can't convert object to primitive value")}},"6abf":function(t,e,n){var r=n("e6f3"),o=n("1691").concat("length","prototype");e.f=Object.getOwnPropertyNames||function(t){return r(t,o)}},"6b4c":function(t,e){var n={}.toString;t.exports=function(t){return n.call(t).slice(8,-1)}},"6bb5":function(t,e,n){"use strict";n.d(e,"a",(function(){return a}));var r=n("061b"),o=n.n(r),i=n("4d16"),c=n.n(i);function a(t){return a=c.a?o.a:function(t){return t.__proto__||o()(t)},a(t)}},"6c1c":function(t,e,n){n("c367");for(var r=n("e53d"),o=n("35e8"),i=n("481b"),c=n("5168")("toStringTag"),a="CSSRuleList,CSSStyleDeclaration,CSSValueList,ClientRectList,DOMRectList,DOMStringList,DOMTokenList,DataTransferItemList,FileList,HTMLAllCollection,HTMLCollection,HTMLFormElement,HTMLSelectElement,MediaList,MimeTypeArray,NamedNodeMap,NodeList,PaintRequestList,Plugin,PluginArray,SVGLengthList,SVGNumberList,SVGPathSegList,SVGPointList,SVGStringList,SVGTransformList,SourceBufferList,StyleSheetList,TextTrackCueList,TextTrackList,TouchList".split(","),u=0;u<a.length;u++){var f=a[u],s=r[f],l=s&&s.prototype;l&&!l[c]&&o(l,c,f),i[f]=i.Array}},"71c1":function(t,e,n){var r=n("3a38"),o=n("25eb");t.exports=function(t){return function(e,n){var i,c,a=String(o(e)),u=r(n),f=a.length;return u<0||u>=f?t?"":void 0:(i=a.charCodeAt(u),i<55296||i>56319||u+1===f||(c=a.charCodeAt(u+1))<56320||c>57343?t?a.charAt(u):i:t?a.slice(u,u+2):c-56320+(i-55296<<10)+65536)}}},7333:function(t,e,n){"use strict";var r=n("9e1e"),o=n("0d58"),i=n("2621"),c=n("52a7"),a=n("4bf8"),u=n("626a"),f=Object.assign;t.exports=!f||n("79e5")((function(){var t={},e={},n=Symbol(),r="abcdefghijklmnopqrst";return t[n]=7,r.split("").forEach((function(t){e[t]=t})),7!=f({},t)[n]||Object.keys(f({},e)).join("")!=r}))?function(t,e){var n=a(t),f=arguments.length,s=1,l=i.f,p=c.f;while(f>s){var v,h=u(arguments[s++]),b=l?o(h).concat(l(h)):o(h),d=b.length,y=0;while(d>y)v=b[y++],r&&!p.call(h,v)||(n[v]=h[v])}return n}:f},7514:function(t,e,n){"use strict";var r=n("5ca1"),o=n("0a49")(5),i="find",c=!0;i in[]&&Array(1)[i]((function(){c=!1})),r(r.P+r.F*c,"Array",{find:function(t){return o(this,t,arguments.length>1?arguments[1]:void 0)}}),n("9c6c")(i)},"75fc":function(t,e,n){"use strict";var r=n("a745"),o=n.n(r);function i(t){if(o()(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}var c=n("774e"),a=n.n(c),u=n("c8bb"),f=n.n(u);function s(t){if(f()(Object(t))||"[object Arguments]"===Object.prototype.toString.call(t))return a()(t)}function l(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function p(t){return i(t)||s(t)||l()}n.d(e,"a",(function(){return p}))},7618:function(t,e,n){"use strict";n.d(e,"a",(function(){return u}));var r=n("5d58"),o=n.n(r),i=n("67bb"),c=n.n(i);function a(t){return a="function"===typeof c.a&&"symbol"===typeof o.a?function(t){return typeof t}:function(t){return t&&"function"===typeof c.a&&t.constructor===c.a&&t!==c.a.prototype?"symbol":typeof t},a(t)}function u(t){return u="function"===typeof c.a&&"symbol"===a(o.a)?function(t){return a(t)}:function(t){return t&&"function"===typeof c.a&&t.constructor===c.a&&t!==c.a.prototype?"symbol":a(t)},u(t)}},"765d":function(t,e,n){n("6718")("observable")},"768b":function(t,e,n){"use strict";var r=n("a745"),o=n.n(r);function i(t){if(o()(t))return t}var c=n("5d73"),a=n.n(c),u=n("c8bb"),f=n.n(u);function s(t,e){if(f()(Object(t))||"[object Arguments]"===Object.prototype.toString.call(t)){var n=[],r=!0,o=!1,i=void 0;try{for(var c,u=a()(t);!(r=(c=u.next()).done);r=!0)if(n.push(c.value),e&&n.length===e)break}catch(s){o=!0,i=s}finally{try{r||null==u["return"]||u["return"]()}finally{if(o)throw i}}return n}}function l(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function p(t,e){return i(t)||s(t,e)||l()}n.d(e,"a",(function(){return p}))},7726:function(t,e){var n=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=n)},"774e":function(t,e,n){t.exports=n("d2d5")},"77f1":function(t,e,n){var r=n("4588"),o=Math.max,i=Math.min;t.exports=function(t,e){return t=r(t),t<0?o(t+e,0):i(t,e)}},"794b":function(t,e,n){t.exports=!n("8e60")&&!n("294c")((function(){return 7!=Object.defineProperty(n("1ec9")("div"),"a",{get:function(){return 7}}).a}))},"795b":function(t,e,n){t.exports=n("696e")},"79aa":function(t,e){t.exports=function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t}},"79e5":function(t,e){t.exports=function(t){try{return!!t()}catch(e){return!0}}},"7a56":function(t,e,n){"use strict";var r=n("7726"),o=n("86cc"),i=n("9e1e"),c=n("2b4c")("species");t.exports=function(t){var e=r[t];i&&e&&!e[c]&&o.f(e,c,{configurable:!0,get:function(){return this}})}},"7bbc":function(t,e,n){var r=n("6821"),o=n("9093").f,i={}.toString,c="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],a=function(t){try{return o(t)}catch(e){return c.slice()}};t.exports.f=function(t){return c&&"[object Window]"==i.call(t)?a(t):o(r(t))}},"7cd6":function(t,e,n){var r=n("40c3"),o=n("5168")("iterator"),i=n("481b");t.exports=n("584a").getIteratorMethod=function(t){if(void 0!=t)return t[o]||t["@@iterator"]||i[r(t)]}},"7d7b":function(t,e,n){var r=n("e4ae"),o=n("7cd6");t.exports=n("584a").getIterator=function(t){var e=o(t);if("function"!=typeof e)throw TypeError(t+" is not iterable!");return r(e.call(t))}},"7d84":function(t,e,n){"use strict";n.d(e,"a",(function(){return a}));n("20d6");var r=n("768b"),o=(n("7514"),n("75fc")),i=(n("ac4d"),n("8a81"),n("ac6a"),n("d225")),c=n("b0b4"),a=function(){function t(e){var n=this;Object(i["a"])(this,t),this.currentPlayer="r",this.cells=[],this.pieces={r:[],b:[]},this.records=[];for(var r=0;r<t.WIDTH;r++){this.cells[r]=[];for(var o=0;o<t.HEIGHT;o++)this.cells[r][o]=null}e.forEach((function(t){n.cells[t.pos[0]][t.pos[1]]=t,n.pieces[t.color].push(t)}))}return Object(c["a"])(t,[{key:"generateMoves",value:function(t){var e=this,n=this.pieces[t],r=[],i=!0,c=!1,a=void 0;try{for(var u,f=function(){var t=u.value,n=t.getNextPositions(e).map((function(e){return{from:t.pos,to:e,value:-1/0}}));r.push.apply(r,Object(o["a"])(n))},s=n[Symbol.iterator]();!(i=(u=s.next()).done);i=!0)f()}catch(l){c=!0,a=l}finally{try{i||null==s.return||s.return()}finally{if(c)throw a}}return r}},{key:"isFinish",value:function(){return!(this.pieces.r.find((function(t){return"b"===t.role}))&&this.pieces.b.find((function(t){return"b"===t.role})))}},{key:"getAllPieces",value:function(){return[].concat(Object(o["a"])(this.pieces.r),Object(o["a"])(this.pieces.b))}},{key:"getPieceByPos",value:function(t){var e=Object(r["a"])(t,2),n=e[0],o=e[1],i=this.cells[n][o];return i}},{key:"canMove",value:function(e,n){return t.inBoard(n)&&e.canMove(n,this)}},{key:"getNextPositions",value:function(t){return t.getNextPositions(this)}},{key:"getPieceNum",value:function(){var t=0;return this.cells.forEach((function(e){return e.forEach((function(e){e&&t++}))})),t}},{key:"updatePiece",value:function(t,e){if(!this.canMove(t,e))return{result:!1};var n=Object(r["a"])(e,2),o=n[0],i=n[1],c=this.cells[o][i];if(c){var a=this.pieces[c.color],u=a.findIndex((function(t){return t===c}));a.splice(u,1)}var f=Object(r["a"])(t.pos,2),s=f[0],l=f[1];return this.cells[s][l]=null,this.cells[o][i]=t,t.pos=e,this.currentPlayer="r"===this.currentPlayer?"b":"r",this.records.push({from:[s,l],to:e,eaten:c}),{result:!0,eatenPiece:c}}},{key:"backMoves",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;while(t--){var e=this.records.pop();if(e){var n=e.from,r=e.to,o=e.eaten,i=this.cells[r[0]][r[1]];i.pos=n,this.cells[n[0]][n[1]]=this.cells[r[0]][r[1]],this.cells[r[0]][r[1]]=o||null,o&&(this.pieces[o.color].push(o),o.pos=r)}}}}],[{key:"inNinePlace",value:function(t,e){var n=Object(r["a"])(t,2),o=n[0],i=n[1];return o>=3&&o<=5&&("t"===e?i>=0&&i<=2:i>=7&&i<=9)}},{key:"inBoard",value:function(t){var e=Object(r["a"])(t,2),n=e[0],o=e[1];return n>=0&&n<=8&&o>=0&&o<=9}},{key:"inOwnSide",value:function(e,n){var o=Object(r["a"])(e,2),i=(o[0],o[1]);return i>=0&&i<5&&"t"===n||i>4&&i<t.HEIGHT&&"b"===n}}]),t}();a.WIDTH=9,a.HEIGHT=10},"7e90":function(t,e,n){var r=n("d9f6"),o=n("e4ae"),i=n("c3a1");t.exports=n("8e60")?Object.defineProperties:function(t,e){o(t);var n,c=i(e),a=c.length,u=0;while(a>u)r.f(t,n=c[u++],e[n]);return t}},"7f20":function(t,e,n){var r=n("86cc").f,o=n("69a8"),i=n("2b4c")("toStringTag");t.exports=function(t,e,n){t&&!o(t=n?t:t.prototype,i)&&r(t,i,{configurable:!0,value:e})}},8079:function(t,e,n){var r=n("7726"),o=n("1991").set,i=r.MutationObserver||r.WebKitMutationObserver,c=r.process,a=r.Promise,u="process"==n("2d95")(c);t.exports=function(){var t,e,n,f=function(){var r,o;u&&(r=c.domain)&&r.exit();while(t){o=t.fn,t=t.next;try{o()}catch(i){throw t?n():e=void 0,i}}e=void 0,r&&r.enter()};if(u)n=function(){c.nextTick(f)};else if(!i||r.navigator&&r.navigator.standalone)if(a&&a.resolve){var s=a.resolve(void 0);n=function(){s.then(f)}}else n=function(){o.call(r,f)};else{var l=!0,p=document.createTextNode("");new i(f).observe(p,{characterData:!0}),n=function(){p.data=l=!l}}return function(r){var o={fn:r,next:void 0};e&&(e.next=o),t||(t=o,n()),e=o}}},8378:function(t,e){var n=t.exports={version:"2.6.10"};"number"==typeof __e&&(__e=n)},"83a1":function(t,e){t.exports=Object.is||function(t,e){return t===e?0!==t||1/t===1/e:t!=t&&e!=e}},8436:function(t,e){t.exports=function(){}},"84f2":function(t,e){t.exports={}},"85f2":function(t,e,n){t.exports=n("454f")},"86cc":function(t,e,n){var r=n("cb7c"),o=n("c69a"),i=n("6a99"),c=Object.defineProperty;e.f=n("9e1e")?Object.defineProperty:function(t,e,n){if(r(t),e=i(e,!0),r(n),o)try{return c(t,e,n)}catch(a){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(t[e]=n.value),t}},"8a81":function(t,e,n){"use strict";var r=n("7726"),o=n("69a8"),i=n("9e1e"),c=n("5ca1"),a=n("2aba"),u=n("67ab").KEY,f=n("79e5"),s=n("5537"),l=n("7f20"),p=n("ca5a"),v=n("2b4c"),h=n("37c8"),b=n("3a72"),d=n("d4c0"),y=n("1169"),O=n("cb7c"),g=n("d3f4"),m=n("4bf8"),w=n("6821"),j=n("6a99"),x=n("4630"),P=n("2aeb"),_=n("7bbc"),S=n("11e9"),E=n("2621"),k=n("86cc"),T=n("0d58"),M=S.f,L=k.f,N=_.f,A=r.Symbol,D=r.JSON,I=D&&D.stringify,R="prototype",F=v("_hidden"),G=v("toPrimitive"),C={}.propertyIsEnumerable,B=s("symbol-registry"),H=s("symbols"),V=s("op-symbols"),W=Object[R],U="function"==typeof A&&!!E.f,K=r.QObject,z=!K||!K[R]||!K[R].findChild,J=i&&f((function(){return 7!=P(L({},"a",{get:function(){return L(this,"a",{value:7}).a}})).a}))?function(t,e,n){var r=M(W,e);r&&delete W[e],L(t,e,n),r&&t!==W&&L(W,e,r)}:L,X=function(t){var e=H[t]=P(A[R]);return e._k=t,e},Y=U&&"symbol"==typeof A.iterator?function(t){return"symbol"==typeof t}:function(t){return t instanceof A},q=function(t,e,n){return t===W&&q(V,e,n),O(t),e=j(e,!0),O(n),o(H,e)?(n.enumerable?(o(t,F)&&t[F][e]&&(t[F][e]=!1),n=P(n,{enumerable:x(0,!1)})):(o(t,F)||L(t,F,x(1,{})),t[F][e]=!0),J(t,e,n)):L(t,e,n)},Q=function(t,e){O(t);var n,r=d(e=w(e)),o=0,i=r.length;while(i>o)q(t,n=r[o++],e[n]);return t},$=function(t,e){return void 0===e?P(t):Q(P(t),e)},Z=function(t){var e=C.call(this,t=j(t,!0));return!(this===W&&o(H,t)&&!o(V,t))&&(!(e||!o(this,t)||!o(H,t)||o(this,F)&&this[F][t])||e)},tt=function(t,e){if(t=w(t),e=j(e,!0),t!==W||!o(H,e)||o(V,e)){var n=M(t,e);return!n||!o(H,e)||o(t,F)&&t[F][e]||(n.enumerable=!0),n}},et=function(t){var e,n=N(w(t)),r=[],i=0;while(n.length>i)o(H,e=n[i++])||e==F||e==u||r.push(e);return r},nt=function(t){var e,n=t===W,r=N(n?V:w(t)),i=[],c=0;while(r.length>c)!o(H,e=r[c++])||n&&!o(W,e)||i.push(H[e]);return i};U||(A=function(){if(this instanceof A)throw TypeError("Symbol is not a constructor!");var t=p(arguments.length>0?arguments[0]:void 0),e=function(n){this===W&&e.call(V,n),o(this,F)&&o(this[F],t)&&(this[F][t]=!1),J(this,t,x(1,n))};return i&&z&&J(W,t,{configurable:!0,set:e}),X(t)},a(A[R],"toString",(function(){return this._k})),S.f=tt,k.f=q,n("9093").f=_.f=et,n("52a7").f=Z,E.f=nt,i&&!n("2d00")&&a(W,"propertyIsEnumerable",Z,!0),h.f=function(t){return X(v(t))}),c(c.G+c.W+c.F*!U,{Symbol:A});for(var rt="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),ot=0;rt.length>ot;)v(rt[ot++]);for(var it=T(v.store),ct=0;it.length>ct;)b(it[ct++]);c(c.S+c.F*!U,"Symbol",{for:function(t){return o(B,t+="")?B[t]:B[t]=A(t)},keyFor:function(t){if(!Y(t))throw TypeError(t+" is not a symbol!");for(var e in B)if(B[e]===t)return e},useSetter:function(){z=!0},useSimple:function(){z=!1}}),c(c.S+c.F*!U,"Object",{create:$,defineProperty:q,defineProperties:Q,getOwnPropertyDescriptor:tt,getOwnPropertyNames:et,getOwnPropertySymbols:nt});var at=f((function(){E.f(1)}));c(c.S+c.F*at,"Object",{getOwnPropertySymbols:function(t){return E.f(m(t))}}),D&&c(c.S+c.F*(!U||f((function(){var t=A();return"[null]"!=I([t])||"{}"!=I({a:t})||"{}"!=I(Object(t))}))),"JSON",{stringify:function(t){var e,n,r=[t],o=1;while(arguments.length>o)r.push(arguments[o++]);if(n=e=r[1],(g(e)||void 0!==t)&&!Y(t))return y(e)||(e=function(t,e){if("function"==typeof n&&(e=n.call(this,t,e)),!Y(e))return e}),r[1]=e,I.apply(D,r)}}),A[R][G]||n("32e9")(A[R],G,A[R].valueOf),l(A,"Symbol"),l(Math,"Math",!0),l(r.JSON,"JSON",!0)},"8e60":function(t,e,n){t.exports=!n("294c")((function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a}))},"8e6e":function(t,e,n){var r=n("5ca1"),o=n("990b"),i=n("6821"),c=n("11e9"),a=n("f1ae");r(r.S,"Object",{getOwnPropertyDescriptors:function(t){var e,n,r=i(t),u=c.f,f=o(r),s={},l=0;while(f.length>l)n=u(r,e=f[l++]),void 0!==n&&a(s,e,n);return s}})},"8f60":function(t,e,n){"use strict";var r=n("a159"),o=n("aebd"),i=n("45f2"),c={};n("35e8")(c,n("5168")("iterator"),(function(){return this})),t.exports=function(t,e,n){t.prototype=r(c,{next:o(1,n)}),i(t,e+" Iterator")}},9003:function(t,e,n){var r=n("6b4c");t.exports=Array.isArray||function(t){return"Array"==r(t)}},9093:function(t,e,n){var r=n("ce10"),o=n("e11e").concat("length","prototype");e.f=Object.getOwnPropertyNames||function(t){return r(t,o)}},9138:function(t,e,n){t.exports=n("35e8")},9427:function(t,e,n){var r=n("63b6");r(r.S,"Object",{create:n("a159")})},"95d5":function(t,e,n){var r=n("40c3"),o=n("5168")("iterator"),i=n("481b");t.exports=n("584a").isIterable=function(t){var e=Object(t);return void 0!==e[o]||"@@iterator"in e||i.hasOwnProperty(r(e))}},"96cf":function(t,e,n){var r=function(t){"use strict";var e,n=Object.prototype,r=n.hasOwnProperty,o="function"===typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",c=o.asyncIterator||"@@asyncIterator",a=o.toStringTag||"@@toStringTag";function u(t,e,n,r){var o=e&&e.prototype instanceof b?e:b,i=Object.create(o.prototype),c=new k(r||[]);return i._invoke=P(t,n,c),i}function f(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(r){return{type:"throw",arg:r}}}t.wrap=u;var s="suspendedStart",l="suspendedYield",p="executing",v="completed",h={};function b(){}function d(){}function y(){}var O={};O[i]=function(){return this};var g=Object.getPrototypeOf,m=g&&g(g(T([])));m&&m!==n&&r.call(m,i)&&(O=m);var w=y.prototype=b.prototype=Object.create(O);function j(t){["next","throw","return"].forEach((function(e){t[e]=function(t){return this._invoke(e,t)}}))}function x(t){function e(n,o,i,c){var a=f(t[n],t,o);if("throw"!==a.type){var u=a.arg,s=u.value;return s&&"object"===typeof s&&r.call(s,"__await")?Promise.resolve(s.__await).then((function(t){e("next",t,i,c)}),(function(t){e("throw",t,i,c)})):Promise.resolve(s).then((function(t){u.value=t,i(u)}),(function(t){return e("throw",t,i,c)}))}c(a.arg)}var n;function o(t,r){function o(){return new Promise((function(n,o){e(t,r,n,o)}))}return n=n?n.then(o,o):o()}this._invoke=o}function P(t,e,n){var r=s;return function(o,i){if(r===p)throw new Error("Generator is already running");if(r===v){if("throw"===o)throw i;return M()}n.method=o,n.arg=i;while(1){var c=n.delegate;if(c){var a=_(c,n);if(a){if(a===h)continue;return a}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(r===s)throw r=v,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r=p;var u=f(t,e,n);if("normal"===u.type){if(r=n.done?v:l,u.arg===h)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r=v,n.method="throw",n.arg=u.arg)}}}function _(t,n){var r=t.iterator[n.method];if(r===e){if(n.delegate=null,"throw"===n.method){if(t.iterator["return"]&&(n.method="return",n.arg=e,_(t,n),"throw"===n.method))return h;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return h}var o=f(r,t.iterator,n.arg);if("throw"===o.type)return n.method="throw",n.arg=o.arg,n.delegate=null,h;var i=o.arg;return i?i.done?(n[t.resultName]=i.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,h):i:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,h)}function S(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function E(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function k(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(S,this),this.reset(!0)}function T(t){if(t){var n=t[i];if(n)return n.call(t);if("function"===typeof t.next)return t;if(!isNaN(t.length)){var o=-1,c=function n(){while(++o<t.length)if(r.call(t,o))return n.value=t[o],n.done=!1,n;return n.value=e,n.done=!0,n};return c.next=c}}return{next:M}}function M(){return{value:e,done:!0}}return d.prototype=w.constructor=y,y.constructor=d,y[a]=d.displayName="GeneratorFunction",t.isGeneratorFunction=function(t){var e="function"===typeof t&&t.constructor;return!!e&&(e===d||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,y):(t.__proto__=y,a in t||(t[a]="GeneratorFunction")),t.prototype=Object.create(w),t},t.awrap=function(t){return{__await:t}},j(x.prototype),x.prototype[c]=function(){return this},t.AsyncIterator=x,t.async=function(e,n,r,o){var i=new x(u(e,n,r,o));return t.isGeneratorFunction(n)?i:i.next().then((function(t){return t.done?t.value:i.next()}))},j(w),w[a]="Generator",w[i]=function(){return this},w.toString=function(){return"[object Generator]"},t.keys=function(t){var e=[];for(var n in t)e.push(n);return e.reverse(),function n(){while(e.length){var r=e.pop();if(r in t)return n.value=r,n.done=!1,n}return n.done=!0,n}},t.values=T,k.prototype={constructor:k,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(E),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var t=this.tryEntries[0],e=t.completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function o(r,o){return a.type="throw",a.arg=t,n.next=r,o&&(n.method="next",n.arg=e),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var c=this.tryEntries[i],a=c.completion;if("root"===c.tryLoc)return o("end");if(c.tryLoc<=this.prev){var u=r.call(c,"catchLoc"),f=r.call(c,"finallyLoc");if(u&&f){if(this.prev<c.catchLoc)return o(c.catchLoc,!0);if(this.prev<c.finallyLoc)return o(c.finallyLoc)}else if(u){if(this.prev<c.catchLoc)return o(c.catchLoc,!0)}else{if(!f)throw new Error("try statement without catch or finally");if(this.prev<c.finallyLoc)return o(c.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var c=i?i.completion:{};return c.type=t,c.arg=e,i?(this.method="next",this.next=i.finallyLoc,h):this.complete(c)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),h},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),E(n),h}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var o=r.arg;E(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:T(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),h}},t}(t.exports);try{regeneratorRuntime=r}catch(o){Function("r","regeneratorRuntime = r")(r)}},"97da":function(t,e,n){"use strict";n.r(e);n("8e6e"),n("456d");var r=n("bd86"),o=(n("96cf"),n("3b8d")),i=n("75fc"),c=(n("ac6a"),n("cadf"),n("551c"),n("f751"),n("097d"),n("3fff")),a=n("d225"),u=n("b0b4"),f=function(){function t(){Object(a["a"])(this,t)}return Object(u["a"])(t,[{key:"getNextMove",value:function(e,n){var r,o=e.pieces[n],i=o.length,c=[];do{var a=t.generateRandomNum(i);r=o[a],c=r.getNextPositions(e)}while(0===c.length);var u=c[t.generateRandomNum(c.length)];return Promise.resolve({from:r.pos,to:u})}}],[{key:"generateRandomNum",value:function(t){return Math.floor(Math.random()*t)}}]),t}(),s=(n("386d"),n("768b")),l=(n("ac4d"),n("8a81"),n("7d84")),p=function(){function t(){Object(a["a"])(this,t)}return Object(u["a"])(t,[{key:"eval",value:function(e,n){var r=0,o=0,i=0,c=0,a=e.pieces[n],u=!0,f=!1,s=void 0;try{for(var p,v=a[Symbol.iterator]();!(u=(p=v.next()).done);u=!0){var h=p.value;r+=t.evalPieceVal(h.role);var b=[l["a"].WIDTH-h.pos[0]-1,l["a"].HEIGHT-h.pos[1]-1];o+=t.evalPosVal(h.role,b)}}catch(j){f=!0,s=j}finally{try{u||null==v.return||v.return()}finally{if(f)throw s}}a=e.pieces["r"===n?"b":"r"];var d=!0,y=!1,O=void 0;try{for(var g,m=a[Symbol.iterator]();!(d=(g=m.next()).done);d=!0){var w=g.value;i+=t.evalPieceVal(w.role),c+=t.evalPosVal(w.role,w.pos)}}catch(j){y=!0,O=j}finally{try{d||null==m.return||m.return()}finally{if(y)throw O}}return r+o-i-c}}],[{key:"evalPieceVal",value:function(t){var e={b:1e6,s:110,x:110,m:300,j:600,p:300,z:70};return e[t]}},{key:"evalPosVal",value:function(t,e){var n=Object(s["a"])(e,2),r=n[0],o=n[1],i={p:[[6,4,0,-10,-12,-10,0,4,6],[2,2,0,-4,-14,-4,0,2,2],[2,2,0,-10,-8,-10,0,2,2],[0,0,-2,4,10,4,-2,0,0],[0,0,0,2,8,2,0,0,0],[-2,0,4,2,6,2,4,0,-2],[0,0,0,2,4,2,0,0,0],[4,0,8,6,10,6,8,0,4],[0,2,4,6,6,6,4,2,0],[0,0,2,6,6,6,2,0,0]],m:[[4,8,16,12,4,12,16,8,4],[4,10,28,16,8,16,28,10,4],[12,14,16,20,18,20,16,14,12],[8,24,18,24,20,24,18,24,8],[6,16,14,18,16,18,14,16,6],[4,12,16,14,12,14,16,12,4],[2,6,8,6,10,6,8,6,2],[4,2,8,8,4,8,8,2,4],[0,2,4,4,-2,4,4,2,0],[0,-4,0,0,0,0,0,-4,0]],j:[[14,14,12,18,16,18,12,14,14],[16,20,18,24,26,24,18,20,16],[12,12,12,18,18,18,12,12,12],[12,18,16,22,22,22,16,18,12],[12,14,12,18,18,18,12,14,12],[12,16,14,20,20,20,14,16,12],[6,10,8,14,14,14,8,10,6],[4,8,6,14,12,14,6,8,4],[8,4,8,16,8,16,8,4,8],[-2,10,6,14,12,14,6,10,-2]],z:[[0,3,6,9,12,9,6,3,0],[18,36,56,80,120,80,56,36,18],[14,26,42,60,80,60,42,26,14],[10,20,30,34,40,34,30,20,10],[6,12,18,18,20,18,18,12,6],[2,0,8,0,8,0,8,0,2],[0,0,-2,0,4,0,-2,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0]],b:null,x:null,s:null},c=i[t];return c?c[o][r]:0}}]),t}(),v=function(){function t(e){var n=e.depth,r=e.evalModel,o=void 0===r?new p:r,i=e.cutOff,c=void 0===i||i;Object(a["a"])(this,t),this.depth=n,this.evalModel=o,this.cutOff=c}return Object(u["a"])(t,[{key:"search",value:function(e,n,r,o,i,c){if(0===r||e.isFinish())return this.evalModel.eval(e,n);var a=o?-1/0:1/0,u=e.generateMoves(o?n:t.getOpponentColor(n)),f=!0,l=!1,p=void 0;try{for(var v,h=u[Symbol.iterator]();!(f=(v=h.next()).done);f=!0){var b=v.value,d=Object(s["a"])(b.from,2),y=d[0],O=d[1],g=b.to,m=e.cells[y][O];e.updatePiece(m,g);var w=this.search(e,n,r-1,!o,i,c);if(e.backMoves(),o){if(a=Math.max(a,w),this.cutOff&&(i=Math.max(i,a),i>=c))return i}else if(a=Math.min(a,w),this.cutOff&&(c=Math.min(c,a),i>=c))return c}}catch(j){l=!0,p=j}finally{try{f||null==h.return||h.return()}finally{if(l)throw p}}return a}},{key:"getBestMove",value:function(t,e,n){var r=-1/0,o=null;console.time("getBestMove");var i=!0,c=!1,a=void 0;try{for(var u,f=n[Symbol.iterator]();!(i=(u=f.next()).done);i=!0){var l=u.value,p=Object(s["a"])(l.from,2),v=p[0],h=p[1],b=l.to,d=t.cells[v][h];t.updatePiece(d,b);var y=this.search(t,e,this.depth-1,!1,-1/0,1/0);t.backMoves(),y>r&&(r=y,o=l)}}catch(O){c=!0,a=O}finally{try{i||null==f.return||f.return()}finally{if(c)throw a}}return console.timeEnd("getBestMove"),Promise.resolve({bestMove:o,value:r})}},{key:"getNextMove",value:function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(e,n){var r,o,i,c;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return console.time("getNextMove"),r=e.generateMoves(n),t.next=4,this.getBestMove(e,n,r);case 4:return o=t.sent,i=o.bestMove,console.timeEnd("getNextMove"),c=e.cells[i.from[0]][i.from[1]],c&&e.updatePiece(c,i.to),t.abrupt("return",Promise.resolve(i));case 10:case"end":return t.stop()}}),t,this)})));function e(e,n){return t.apply(this,arguments)}return e}()}],[{key:"getOpponentColor",value:function(t){return"r"===t?"b":"r"}}]),t}(),h=function(t){var e=t.aiType,n=t.depth,r=void 0===n?3:n;switch(e){case"minimax":return new v({depth:r});default:return new f}},b=n("559e");function d(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function y(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?d(n,!0).forEach((function(e){Object(r["a"])(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):d(n).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var O,g=function(t){var e=t.color,n=t.pos,r=t.key,o=t.role,i={b:b["a"],j:b["b"],m:b["c"],p:b["d"],s:b["e"],x:b["f"],z:b["g"]};return new i[o]({color:e,pos:n,key:r})},m=function(t){var e=[];return[].concat(Object(i["a"])(t.pieces.b),Object(i["a"])(t.pieces.r)).forEach((function(t){return e.push(g(t))})),new l["a"](e)};self.onmessage=function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(e){var n,r,o,i,a,u,f,s,l,p,v,b,d,g,w,j;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:n=e.data,r=n.type,o=n.data,console.log("get message: "),console.log(r,o),t.t0=r,t.next=t.t0===c["a"].INIT_AI?6:t.t0===c["a"].GET_NEXT_MOVE?9:t.t0===c["a"].GET_BEST_MOVE?16:25;break;case 6:return i=o.aiType,a=o.depth,O=h({aiType:i,depth:a}),t.abrupt("break",25);case 9:return u=o.board,f=o.color,s=m(u),t.next=13,O.getNextMove(s,f);case 13:return l=t.sent,self.postMessage({type:c["a"].RETURN_NEXT_MOVE,data:y({},l)}),t.abrupt("break",25);case 16:return p=o.board,v=o.color,b=o.piecesMoves,d=m(p),t.next=20,O.getBestMove(d,v,b);case 20:return g=t.sent,w=g.bestMove,j=g.value,self.postMessage({type:c["a"].RETURN_BEST_MOVE,data:{bestMove:w,value:j}}),t.abrupt("break",25);case 25:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},"990b":function(t,e,n){var r=n("9093"),o=n("2621"),i=n("cb7c"),c=n("7726").Reflect;t.exports=c&&c.ownKeys||function(t){var e=r.f(i(t)),n=o.f;return n?e.concat(n(t)):e}},"9aa9":function(t,e){e.f=Object.getOwnPropertySymbols},"9b43":function(t,e,n){var r=n("d8e8");t.exports=function(t,e,n){if(r(t),void 0===e)return t;switch(n){case 1:return function(n){return t.call(e,n)};case 2:return function(n,r){return t.call(e,n,r)};case 3:return function(n,r,o){return t.call(e,n,r,o)}}return function(){return t.apply(e,arguments)}}},"9c6c":function(t,e,n){var r=n("2b4c")("unscopables"),o=Array.prototype;void 0==o[r]&&n("32e9")(o,r,{}),t.exports=function(t){o[r][t]=!0}},"9c80":function(t,e){t.exports=function(t){try{return{e:!1,v:t()}}catch(e){return{e:!0,v:e}}}},"9def":function(t,e,n){var r=n("4588"),o=Math.min;t.exports=function(t){return t>0?o(r(t),9007199254740991):0}},"9e1e":function(t,e,n){t.exports=!n("79e5")((function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a}))},a159:function(t,e,n){var r=n("e4ae"),o=n("7e90"),i=n("1691"),c=n("5559")("IE_PROTO"),a=function(){},u="prototype",f=function(){var t,e=n("1ec9")("iframe"),r=i.length,o="<",c=">";e.style.display="none",n("32fc").appendChild(e),e.src="javascript:",t=e.contentWindow.document,t.open(),t.write(o+"script"+c+"document.F=Object"+o+"/script"+c),t.close(),f=t.F;while(r--)delete f[u][i[r]];return f()};t.exports=Object.create||function(t,e){var n;return null!==t?(a[u]=r(t),n=new a,a[u]=null,n[c]=t):n=f(),void 0===e?n:o(n,e)}},a22a:function(t,e,n){var r=n("d864"),o=n("b0dc"),i=n("3702"),c=n("e4ae"),a=n("b447"),u=n("7cd6"),f={},s={};e=t.exports=function(t,e,n,l,p){var v,h,b,d,y=p?function(){return t}:u(t),O=r(n,l,e?2:1),g=0;if("function"!=typeof y)throw TypeError(t+" is not iterable!");if(i(y)){for(v=a(t.length);v>g;g++)if(d=e?O(c(h=t[g])[0],h[1]):O(t[g]),d===f||d===s)return d}else for(b=y.call(t);!(h=b.next()).done;)if(d=o(b,O,h.value,e),d===f||d===s)return d};e.BREAK=f,e.RETURN=s},a25f:function(t,e,n){var r=n("7726"),o=r.navigator;t.exports=o&&o.userAgent||""},a5b8:function(t,e,n){"use strict";var r=n("d8e8");function o(t){var e,n;this.promise=new t((function(t,r){if(void 0!==e||void 0!==n)throw TypeError("Bad Promise constructor");e=t,n=r})),this.resolve=r(e),this.reject=r(n)}t.exports.f=function(t){return new o(t)}},a745:function(t,e,n){t.exports=n("f410")},aba2:function(t,e,n){var r=n("e53d"),o=n("4178").set,i=r.MutationObserver||r.WebKitMutationObserver,c=r.process,a=r.Promise,u="process"==n("6b4c")(c);t.exports=function(){var t,e,n,f=function(){var r,o;u&&(r=c.domain)&&r.exit();while(t){o=t.fn,t=t.next;try{o()}catch(i){throw t?n():e=void 0,i}}e=void 0,r&&r.enter()};if(u)n=function(){c.nextTick(f)};else if(!i||r.navigator&&r.navigator.standalone)if(a&&a.resolve){var s=a.resolve(void 0);n=function(){s.then(f)}}else n=function(){o.call(r,f)};else{var l=!0,p=document.createTextNode("");new i(f).observe(p,{characterData:!0}),n=function(){p.data=l=!l}}return function(r){var o={fn:r,next:void 0};e&&(e.next=o),t||(t=o,n()),e=o}}},ac4d:function(t,e,n){n("3a72")("asyncIterator")},ac6a:function(t,e,n){for(var r=n("cadf"),o=n("0d58"),i=n("2aba"),c=n("7726"),a=n("32e9"),u=n("84f2"),f=n("2b4c"),s=f("iterator"),l=f("toStringTag"),p=u.Array,v={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},h=o(v),b=0;b<h.length;b++){var d,y=h[b],O=v[y],g=c[y],m=g&&g.prototype;if(m&&(m[s]||a(m,s,p),m[l]||a(m,l,y),u[y]=p,O))for(d in r)m[d]||i(m,d,r[d],!0)}},aebd:function(t,e){t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},b0b4:function(t,e,n){"use strict";n.d(e,"a",(function(){return c}));var r=n("85f2"),o=n.n(r);function i(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),o()(t,r.key,r)}}function c(t,e,n){return e&&i(t.prototype,e),n&&i(t,n),t}},b0c5:function(t,e,n){"use strict";var r=n("520a");n("5ca1")({target:"RegExp",proto:!0,forced:r!==/./.exec},{exec:r})},b0dc:function(t,e,n){var r=n("e4ae");t.exports=function(t,e,n,o){try{return o?e(r(n)[0],n[1]):e(n)}catch(c){var i=t["return"];throw void 0!==i&&r(i.call(t)),c}}},b447:function(t,e,n){var r=n("3a38"),o=Math.min;t.exports=function(t){return t>0?o(r(t),9007199254740991):0}},b8e3:function(t,e){t.exports=!0},bc13:function(t,e,n){var r=n("e53d"),o=r.navigator;t.exports=o&&o.userAgent||""},bcaa:function(t,e,n){var r=n("cb7c"),o=n("d3f4"),i=n("a5b8");t.exports=function(t,e){if(r(t),o(e)&&e.constructor===t)return e;var n=i.f(t),c=n.resolve;return c(e),n.promise}},bd86:function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));var r=n("85f2"),o=n.n(r);function i(t,e,n){return e in t?o()(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}},be13:function(t,e){t.exports=function(t){if(void 0==t)throw TypeError("Can't call method on  "+t);return t}},bf0b:function(t,e,n){var r=n("355d"),o=n("aebd"),i=n("36c3"),c=n("1bc3"),a=n("07e3"),u=n("794b"),f=Object.getOwnPropertyDescriptor;e.f=n("8e60")?f:function(t,e){if(t=i(t),e=c(e,!0),u)try{return f(t,e)}catch(n){}if(a(t,e))return o(!r.f.call(t,e),t[e])}},c207:function(t,e){},c366:function(t,e,n){var r=n("6821"),o=n("9def"),i=n("77f1");t.exports=function(t){return function(e,n,c){var a,u=r(e),f=o(u.length),s=i(c,f);if(t&&n!=n){while(f>s)if(a=u[s++],a!=a)return!0}else for(;f>s;s++)if((t||s in u)&&u[s]===n)return t||s||0;return!t&&-1}}},c367:function(t,e,n){"use strict";var r=n("8436"),o=n("50ed"),i=n("481b"),c=n("36c3");t.exports=n("30f1")(Array,"Array",(function(t,e){this._t=c(t),this._i=0,this._k=e}),(function(){var t=this._t,e=this._k,n=this._i++;return!t||n>=t.length?(this._t=void 0,o(1)):o(0,"keys"==e?n:"values"==e?t[n]:[n,t[n]])}),"values"),i.Arguments=i.Array,r("keys"),r("values"),r("entries")},c3a1:function(t,e,n){var r=n("e6f3"),o=n("1691");t.exports=Object.keys||function(t){return r(t,o)}},c69a:function(t,e,n){t.exports=!n("9e1e")&&!n("79e5")((function(){return 7!=Object.defineProperty(n("230e")("div"),"a",{get:function(){return 7}}).a}))},c8bb:function(t,e,n){t.exports=n("54a1")},ca5a:function(t,e){var n=0,r=Math.random();t.exports=function(t){return"Symbol(".concat(void 0===t?"":t,")_",(++n+r).toString(36))}},cadf:function(t,e,n){"use strict";var r=n("9c6c"),o=n("d53b"),i=n("84f2"),c=n("6821");t.exports=n("01f9")(Array,"Array",(function(t,e){this._t=c(t),this._i=0,this._k=e}),(function(){var t=this._t,e=this._k,n=this._i++;return!t||n>=t.length?(this._t=void 0,o(1)):o(0,"keys"==e?n:"values"==e?t[n]:[n,t[n]])}),"values"),i.Arguments=i.Array,r("keys"),r("values"),r("entries")},cb7c:function(t,e,n){var r=n("d3f4");t.exports=function(t){if(!r(t))throw TypeError(t+" is not an object!");return t}},ccb9:function(t,e,n){e.f=n("5168")},cd1c:function(t,e,n){var r=n("e853");t.exports=function(t,e){return new(r(t))(e)}},cd78:function(t,e,n){var r=n("e4ae"),o=n("f772"),i=n("656e");t.exports=function(t,e){if(r(t),o(e)&&e.constructor===t)return e;var n=i.f(t),c=n.resolve;return c(e),n.promise}},ce10:function(t,e,n){var r=n("69a8"),o=n("6821"),i=n("c366")(!1),c=n("613b")("IE_PROTO");t.exports=function(t,e){var n,a=o(t),u=0,f=[];for(n in a)n!=c&&r(a,n)&&f.push(n);while(e.length>u)r(a,n=e[u++])&&(~i(f,n)||f.push(n));return f}},ce7e:function(t,e,n){var r=n("63b6"),o=n("584a"),i=n("294c");t.exports=function(t,e){var n=(o.Object||{})[t]||Object[t],c={};c[t]=e(n),r(r.S+r.F*i((function(){n(1)})),"Object",c)}},d225:function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}n.d(e,"a",(function(){return r}))},d2d5:function(t,e,n){n("1654"),n("549b"),t.exports=n("584a").Array.from},d3f4:function(t,e){t.exports=function(t){return"object"===typeof t?null!==t:"function"===typeof t}},d4c0:function(t,e,n){var r=n("0d58"),o=n("2621"),i=n("52a7");t.exports=function(t){var e=r(t),n=o.f;if(n){var c,a=n(t),u=i.f,f=0;while(a.length>f)u.call(t,c=a[f++])&&e.push(c)}return e}},d53b:function(t,e){t.exports=function(t,e){return{value:e,done:!!t}}},d864:function(t,e,n){var r=n("79aa");t.exports=function(t,e,n){if(r(t),void 0===e)return t;switch(n){case 1:return function(n){return t.call(e,n)};case 2:return function(n,r){return t.call(e,n,r)};case 3:return function(n,r,o){return t.call(e,n,r,o)}}return function(){return t.apply(e,arguments)}}},d8d6:function(t,e,n){n("1654"),n("6c1c"),t.exports=n("ccb9").f("iterator")},d8e8:function(t,e){t.exports=function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t}},d9f6:function(t,e,n){var r=n("e4ae"),o=n("794b"),i=n("1bc3"),c=Object.defineProperty;e.f=n("8e60")?Object.defineProperty:function(t,e,n){if(r(t),e=i(e,!0),r(n),o)try{return c(t,e,n)}catch(a){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(t[e]=n.value),t}},dbdb:function(t,e,n){var r=n("584a"),o=n("e53d"),i="__core-js_shared__",c=o[i]||(o[i]={});(t.exports=function(t,e){return c[t]||(c[t]=void 0!==e?e:{})})("versions",[]).push({version:r.version,mode:n("b8e3")?"pure":"global",copyright:"© 2019 Denis Pushkarev (zloirock.ru)"})},dc62:function(t,e,n){n("9427");var r=n("584a").Object;t.exports=function(t,e){return r.create(t,e)}},dcbc:function(t,e,n){var r=n("2aba");t.exports=function(t,e,n){for(var o in e)r(t,o,e[o],n);return t}},e11e:function(t,e){t.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},e4ae:function(t,e,n){var r=n("f772");t.exports=function(t){if(!r(t))throw TypeError(t+" is not an object!");return t}},e53d:function(t,e){var n=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=n)},e6f3:function(t,e,n){var r=n("07e3"),o=n("36c3"),i=n("5b4e")(!1),c=n("5559")("IE_PROTO");t.exports=function(t,e){var n,a=o(t),u=0,f=[];for(n in a)n!=c&&r(a,n)&&f.push(n);while(e.length>u)r(a,n=e[u++])&&(~i(f,n)||f.push(n));return f}},e853:function(t,e,n){var r=n("d3f4"),o=n("1169"),i=n("2b4c")("species");t.exports=function(t){var e;return o(t)&&(e=t.constructor,"function"!=typeof e||e!==Array&&!o(e.prototype)||(e=void 0),r(e)&&(e=e[i],null===e&&(e=void 0))),void 0===e?Array:e}},ead6:function(t,e,n){var r=n("f772"),o=n("e4ae"),i=function(t,e){if(o(t),!r(e)&&null!==e)throw TypeError(e+": can't set as prototype!")};t.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(t,e,r){try{r=n("d864")(Function.call,n("bf0b").f(Object.prototype,"__proto__").set,2),r(t,[]),e=!(t instanceof Array)}catch(o){e=!0}return function(t,n){return i(t,n),e?t.__proto__=n:r(t,n),t}}({},!1):void 0),check:i}},ebd6:function(t,e,n){var r=n("cb7c"),o=n("d8e8"),i=n("2b4c")("species");t.exports=function(t,e){var n,c=r(t).constructor;return void 0===c||void 0==(n=r(c)[i])?e:o(n)}},ebfd:function(t,e,n){var r=n("62a0")("meta"),o=n("f772"),i=n("07e3"),c=n("d9f6").f,a=0,u=Object.isExtensible||function(){return!0},f=!n("294c")((function(){return u(Object.preventExtensions({}))})),s=function(t){c(t,r,{value:{i:"O"+ ++a,w:{}}})},l=function(t,e){if(!o(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!i(t,r)){if(!u(t))return"F";if(!e)return"E";s(t)}return t[r].i},p=function(t,e){if(!i(t,r)){if(!u(t))return!0;if(!e)return!1;s(t)}return t[r].w},v=function(t){return f&&h.NEED&&u(t)&&!i(t,r)&&s(t),t},h=t.exports={KEY:r,NEED:!1,fastKey:l,getWeak:p,onFreeze:v}},f1ae:function(t,e,n){"use strict";var r=n("86cc"),o=n("4630");t.exports=function(t,e,n){e in t?r.f(t,e,o(0,n)):t[e]=n}},f201:function(t,e,n){var r=n("e4ae"),o=n("79aa"),i=n("5168")("species");t.exports=function(t,e){var n,c=r(t).constructor;return void 0===c||void 0==(n=r(c)[i])?e:o(n)}},f410:function(t,e,n){n("1af6"),t.exports=n("584a").Array.isArray},f605:function(t,e){t.exports=function(t,e,n,r){if(!(t instanceof e)||void 0!==r&&r in t)throw TypeError(n+": incorrect invocation!");return t}},f751:function(t,e,n){var r=n("5ca1");r(r.S+r.F,"Object",{assign:n("7333")})},f772:function(t,e){t.exports=function(t){return"object"===typeof t?null!==t:"function"===typeof t}},f921:function(t,e,n){n("014b"),n("c207"),n("69d3"),n("765d"),t.exports=n("584a").Symbol},fa5b:function(t,e,n){t.exports=n("5537")("native-function-to-string",Function.toString)},fa99:function(t,e,n){n("0293"),t.exports=n("584a").Object.getPrototypeOf},fab2:function(t,e,n){var r=n("7726").document;t.exports=r&&r.documentElement}});`

let workerPath = window.URL.createObjectURL(new Blob([aiCode], { type: 'application/javascript' }))
if (process.env.VUE_APP_ENV === 'blog') {
  workerPath = '/js/vue-chinese-chess/ai.bundle.js'
}

const createPlayer = (player: IPlayer, board?: Board) => {
  const { color, type, level } = player
  if (type === 'human') return new Player(color, type)
  else {
    return new Player(
      color,
      type,
      new Bridge({
        depth: (level as number) + 2,
        board: board as Board,
        color,
        aiType: 'minimax',
        workerPath
      })
      // new ProxyAi()
    )
  }
}

export const createGame = (players: IPlayer[]) => {
  const board = createBoard()
  const tPlayer = createPlayer(players[0], board)
  const bPlayer = createPlayer(players[1])
  return new Game(board, bPlayer, tPlayer)
}
